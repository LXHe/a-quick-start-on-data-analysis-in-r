<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>第1章 基本介绍 | R数据分析入门</title>
  <meta name="description" content="This is a textbook for a quick start on data analysis in R." />
  <meta name="generator" content="bookdown 0.38 and GitBook 2.6.7" />

  <meta property="og:title" content="第1章 基本介绍 | R数据分析入门" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="This is a textbook for a quick start on data analysis in R." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="第1章 基本介绍 | R数据分析入门" />
  
  <meta name="twitter:description" content="This is a textbook for a quick start on data analysis in R." />
  

<meta name="author" content="Lingxiao HE" />


<meta name="date" content="2024-04-12" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="index.html"/>
<link rel="next" href="数据导入导出与预处理.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">R数据分析入门</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>本书说明</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#软件准备"><i class="fa fa-check"></i>软件准备</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#r包的安装与调用"><i class="fa fa-check"></i>R包的安装与调用</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="基本介绍.html"><a href="基本介绍.html"><i class="fa fa-check"></i><b>1</b> 基本介绍</a>
<ul>
<li class="chapter" data-level="1.1" data-path="基本介绍.html"><a href="基本介绍.html#变量赋值"><i class="fa fa-check"></i><b>1.1</b> 变量赋值</a></li>
<li class="chapter" data-level="1.2" data-path="基本介绍.html"><a href="基本介绍.html#数据类型"><i class="fa fa-check"></i><b>1.2</b> 数据类型</a></li>
<li class="chapter" data-level="1.3" data-path="基本介绍.html"><a href="基本介绍.html#chapter1-label-vector"><i class="fa fa-check"></i><b>1.3</b> 向量</a>
<ul>
<li class="chapter" data-level="1.3.1" data-path="基本介绍.html"><a href="基本介绍.html#按逻辑进行向量选择"><i class="fa fa-check"></i><b>1.3.1</b> 按逻辑进行向量选择</a></li>
<li class="chapter" data-level="1.3.2" data-path="基本介绍.html"><a href="基本介绍.html#向量的极值"><i class="fa fa-check"></i><b>1.3.2</b> 向量的极值</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="基本介绍.html"><a href="基本介绍.html#缺失值"><i class="fa fa-check"></i><b>1.4</b> 缺失值</a>
<ul>
<li class="chapter" data-level="1.4.1" data-path="基本介绍.html"><a href="基本介绍.html#nan"><i class="fa fa-check"></i><b>1.4.1</b> NaN</a></li>
<li class="chapter" data-level="1.4.2" data-path="基本介绍.html"><a href="基本介绍.html#null"><i class="fa fa-check"></i><b>1.4.2</b> NULL</a></li>
<li class="chapter" data-level="1.4.3" data-path="基本介绍.html"><a href="基本介绍.html#na"><i class="fa fa-check"></i><b>1.4.3</b> NA</a></li>
</ul></li>
<li class="chapter" data-level="1.5" data-path="基本介绍.html"><a href="基本介绍.html#chapter1-label-matrix"><i class="fa fa-check"></i><b>1.5</b> 矩阵</a></li>
<li class="chapter" data-level="1.6" data-path="基本介绍.html"><a href="基本介绍.html#数据框"><i class="fa fa-check"></i><b>1.6</b> 数据框</a></li>
<li class="chapter" data-level="1.7" data-path="基本介绍.html"><a href="基本介绍.html#数组"><i class="fa fa-check"></i><b>1.7</b> 数组</a></li>
<li class="chapter" data-level="1.8" data-path="基本介绍.html"><a href="基本介绍.html#列表"><i class="fa fa-check"></i><b>1.8</b> 列表</a></li>
<li class="chapter" data-level="1.9" data-path="基本介绍.html"><a href="基本介绍.html#字符串处理"><i class="fa fa-check"></i><b>1.9</b> 字符串处理</a></li>
<li class="chapter" data-level="1.10" data-path="基本介绍.html"><a href="基本介绍.html#常用函数"><i class="fa fa-check"></i><b>1.10</b> 常用函数</a>
<ul>
<li class="chapter" data-level="1.10.1" data-path="基本介绍.html"><a href="基本介绍.html#seq函数"><i class="fa fa-check"></i><b>1.10.1</b> seq()函数</a></li>
<li class="chapter" data-level="1.10.2" data-path="基本介绍.html"><a href="基本介绍.html#rep函数"><i class="fa fa-check"></i><b>1.10.2</b> rep()函数</a></li>
<li class="chapter" data-level="1.10.3" data-path="基本介绍.html"><a href="基本介绍.html#unique函数"><i class="fa fa-check"></i><b>1.10.3</b> unique()函数</a></li>
<li class="chapter" data-level="1.10.4" data-path="基本介绍.html"><a href="基本介绍.html#quantile函数"><i class="fa fa-check"></i><b>1.10.4</b> quantile()函数</a></li>
<li class="chapter" data-level="1.10.5" data-path="基本介绍.html"><a href="基本介绍.html#floorceilinground函数"><i class="fa fa-check"></i><b>1.10.5</b> floor()、ceiling()、round()函数</a></li>
<li class="chapter" data-level="1.10.6" data-path="基本介绍.html"><a href="基本介绍.html#sample函数"><i class="fa fa-check"></i><b>1.10.6</b> sample()函数</a></li>
<li class="chapter" data-level="1.10.7" data-path="基本介绍.html"><a href="基本介绍.html#combn函数"><i class="fa fa-check"></i><b>1.10.7</b> combn()函数</a></li>
<li class="chapter" data-level="1.10.8" data-path="基本介绍.html"><a href="基本介绍.html#paste函数"><i class="fa fa-check"></i><b>1.10.8</b> paste()函数</a></li>
<li class="chapter" data-level="1.10.9" data-path="基本介绍.html"><a href="基本介绍.html#chapter1-label-ifelse"><i class="fa fa-check"></i><b>1.10.9</b> ifelse()函数</a></li>
<li class="chapter" data-level="1.10.10" data-path="基本介绍.html"><a href="基本介绍.html#chapter1-label-if-else"><i class="fa fa-check"></i><b>1.10.10</b> if(){}else{}函数</a></li>
<li class="chapter" data-level="1.10.11" data-path="基本介绍.html"><a href="基本介绍.html#循环"><i class="fa fa-check"></i><b>1.10.11</b> 循环</a></li>
<li class="chapter" data-level="1.10.12" data-path="基本介绍.html"><a href="基本介绍.html#自定义函数"><i class="fa fa-check"></i><b>1.10.12</b> 自定义函数</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="数据导入导出与预处理.html"><a href="数据导入导出与预处理.html"><i class="fa fa-check"></i><b>2</b> 数据导入、导出与预处理</a>
<ul>
<li class="chapter" data-level="2.1" data-path="数据导入导出与预处理.html"><a href="数据导入导出与预处理.html#数据导入"><i class="fa fa-check"></i><b>2.1</b> 数据导入</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="数据导入导出与预处理.html"><a href="数据导入导出与预处理.html#csv文件读取"><i class="fa fa-check"></i><b>2.1.1</b> CSV文件读取</a></li>
<li class="chapter" data-level="2.1.2" data-path="数据导入导出与预处理.html"><a href="数据导入导出与预处理.html#excel文件读取"><i class="fa fa-check"></i><b>2.1.2</b> excel文件读取</a></li>
<li class="chapter" data-level="2.1.3" data-path="数据导入导出与预处理.html"><a href="数据导入导出与预处理.html#文件读取汇总"><i class="fa fa-check"></i><b>2.1.3</b> 文件读取汇总</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="数据导入导出与预处理.html"><a href="数据导入导出与预处理.html#数据导出"><i class="fa fa-check"></i><b>2.2</b> 数据导出</a></li>
<li class="chapter" data-level="2.3" data-path="数据导入导出与预处理.html"><a href="数据导入导出与预处理.html#路径"><i class="fa fa-check"></i><b>2.3</b> 路径</a></li>
<li class="chapter" data-level="2.4" data-path="数据导入导出与预处理.html"><a href="数据导入导出与预处理.html#数据预处理"><i class="fa fa-check"></i><b>2.4</b> 数据预处理</a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="数据导入导出与预处理.html"><a href="数据导入导出与预处理.html#tidyverse包"><i class="fa fa-check"></i><b>2.4.1</b> tidyverse包</a></li>
<li class="chapter" data-level="2.4.2" data-path="数据导入导出与预处理.html"><a href="数据导入导出与预处理.html#批量读取数据"><i class="fa fa-check"></i><b>2.4.2</b> 批量读取数据</a></li>
<li class="chapter" data-level="2.4.3" data-path="数据导入导出与预处理.html"><a href="数据导入导出与预处理.html#数据合并"><i class="fa fa-check"></i><b>2.4.3</b> 数据合并</a></li>
<li class="chapter" data-level="2.4.4" data-path="数据导入导出与预处理.html"><a href="数据导入导出与预处理.html#数据清洗"><i class="fa fa-check"></i><b>2.4.4</b> 数据清洗</a></li>
<li class="chapter" data-level="2.4.5" data-path="数据导入导出与预处理.html"><a href="数据导入导出与预处理.html#数据整理"><i class="fa fa-check"></i><b>2.4.5</b> 数据整理</a></li>
<li class="chapter" data-level="2.4.6" data-path="数据导入导出与预处理.html"><a href="数据导入导出与预处理.html#删除重复记录"><i class="fa fa-check"></i><b>2.4.6</b> 删除重复记录</a></li>
<li class="chapter" data-level="2.4.7" data-path="数据导入导出与预处理.html"><a href="数据导入导出与预处理.html#按条件筛选记录"><i class="fa fa-check"></i><b>2.4.7</b> 按条件筛选记录</a></li>
<li class="chapter" data-level="2.4.8" data-path="数据导入导出与预处理.html"><a href="数据导入导出与预处理.html#按条件创建变量"><i class="fa fa-check"></i><b>2.4.8</b> 按条件创建变量</a></li>
<li class="chapter" data-level="2.4.9" data-path="数据导入导出与预处理.html"><a href="数据导入导出与预处理.html#chapter2-label-summarise"><i class="fa fa-check"></i><b>2.4.9</b> 汇总函数summarise()与reframe()</a></li>
<li class="chapter" data-level="2.4.10" data-path="数据导入导出与预处理.html"><a href="数据导入导出与预处理.html#across函数"><i class="fa fa-check"></i><b>2.4.10</b> across()函数</a></li>
<li class="chapter" data-level="2.4.11" data-path="数据导入导出与预处理.html"><a href="数据导入导出与预处理.html#日期处理"><i class="fa fa-check"></i><b>2.4.11</b> 日期处理</a></li>
</ul></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">R数据分析入门</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="基本介绍" class="section level1 hasAnchor" number="1">
<h1><span class="header-section-number">第1章</span> 基本介绍<a href="基本介绍.html#基本介绍" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div id="变量赋值" class="section level2 hasAnchor" number="1.1">
<h2><span class="header-section-number">1.1</span> 变量赋值<a href="基本介绍.html#变量赋值" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>R中变量的赋值采用<code>&lt;-</code>(快捷键 “Alt”+“-”)或者<code>=</code>完成，左侧为变量名称，右侧为赋值内容。
变量命名时需要注意：</p>
<li>
变量名称可以由字母或者点号<code>.</code>开头且<strong>只能是</strong>字母、数字、下划线<code>_</code>和点号<code>.</code>的组合。
</li>
<li>
变量名称对大小写敏感，所以在调用时需要区分大小写。
</li>
<li>
当用点号 <code>.</code> 开头时，<u>第二个字符</u><font color="red"><strong>不能</strong></font>是数字。
</li>
<li>
变量名称<font color="red"><strong>不能</strong></font>用数字或下划线<code>_</code>开头。
</li>
<li>
预留变量或者函数名称(如<code>TRUE</code>，<code>FALSE</code>，<code>NULL</code>)不能用来命名。
</li>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="基本介绍.html#cb1-1" tabindex="-1"></a><span class="co"># 给数字赋值</span></span>
<span id="cb1-2"><a href="基本介绍.html#cb1-2" tabindex="-1"></a>price <span class="ot">&lt;-</span> <span class="dv">2</span></span>
<span id="cb1-3"><a href="基本介绍.html#cb1-3" tabindex="-1"></a><span class="fu">print</span>(price)</span></code></pre></div>
<pre><code>## [1] 2</code></pre>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="基本介绍.html#cb3-1" tabindex="-1"></a><span class="co"># 给字符赋值</span></span>
<span id="cb3-2"><a href="基本介绍.html#cb3-2" tabindex="-1"></a>greeting <span class="ot">&lt;-</span> <span class="st">&quot;Hello!&quot;</span></span>
<span id="cb3-3"><a href="基本介绍.html#cb3-3" tabindex="-1"></a><span class="fu">print</span>(greeting)</span></code></pre></div>
<pre><code>## [1] &quot;Hello!&quot;</code></pre>
</div>
<div id="数据类型" class="section level2 hasAnchor" number="1.2">
<h2><span class="header-section-number">1.2</span> 数据类型<a href="基本介绍.html#数据类型" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>R的基本数据类型包括三种：<strong>数字(numeric)</strong>、<strong>字符(character)</strong>和<strong>逻辑(logical)</strong>。</p>
<p>既可以使用<code>class()</code>函数查看变量的数据类型，也可以使用<code>is.character()</code>，<code>is.numeric()</code>判断数据类型。</p>
<p>将一种变量类型更改为另一种类型，可使用<code>as.*</code>函数，即<code>as.numeric()</code>，<code>as.character()</code>，<code>as.logical()</code></p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="基本介绍.html#cb5-1" tabindex="-1"></a><span class="co"># 数字：浮点数或者整数</span></span>
<span id="cb5-2"><a href="基本介绍.html#cb5-2" tabindex="-1"></a>bmi <span class="ot">&lt;-</span> <span class="fl">26.6</span></span>
<span id="cb5-3"><a href="基本介绍.html#cb5-3" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">class</span>(bmi))</span></code></pre></div>
<pre><code>## [1] &quot;numeric&quot;</code></pre>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="基本介绍.html#cb7-1" tabindex="-1"></a><span class="co"># 字符：用引号引用的文字或者数字</span></span>
<span id="cb7-2"><a href="基本介绍.html#cb7-2" tabindex="-1"></a>str_name <span class="ot">&lt;-</span> <span class="st">&quot;Tom&quot;</span></span>
<span id="cb7-3"><a href="基本介绍.html#cb7-3" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">class</span>(str_name))</span></code></pre></div>
<pre><code>## [1] &quot;character&quot;</code></pre>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="基本介绍.html#cb9-1" tabindex="-1"></a>str_age <span class="ot">&lt;-</span> <span class="st">&quot;20&quot;</span></span>
<span id="cb9-2"><a href="基本介绍.html#cb9-2" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">class</span>(str_age))</span></code></pre></div>
<pre><code>## [1] &quot;character&quot;</code></pre>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="基本介绍.html#cb11-1" tabindex="-1"></a><span class="co"># 逻辑：“是”/“否”的判断</span></span>
<span id="cb11-2"><a href="基本介绍.html#cb11-2" tabindex="-1"></a><span class="fu">is.character</span>(bmi) <span class="co"># 返回值为FALSE</span></span></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="基本介绍.html#cb13-1" tabindex="-1"></a><span class="fu">is.character</span>(str_name) <span class="co"># 返回值为TRUE</span></span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="基本介绍.html#cb15-1" tabindex="-1"></a><span class="co"># 改变变量类型</span></span>
<span id="cb15-2"><a href="基本介绍.html#cb15-2" tabindex="-1"></a><span class="fu">as.numeric</span>(str_age) </span></code></pre></div>
<pre><code>## [1] 20</code></pre>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="基本介绍.html#cb17-1" tabindex="-1"></a><span class="fu">as.logical</span>(<span class="dv">1</span>) <span class="co"># 数字1为TRUE，0为FALSE</span></span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
</div>
<div id="chapter1-label-vector" class="section level2 hasAnchor" number="1.3">
<h2><span class="header-section-number">1.3</span> 向量<a href="基本介绍.html#chapter1-label-vector" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>向量(vector)</strong>是多个值（数字、字符或逻辑值）的组合。创建向量可以使用<code>c()</code>函数，<code>c</code>代表<code>concatenate</code>。</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="基本介绍.html#cb19-1" tabindex="-1"></a>math_score <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">60</span>,<span class="dv">75</span>,<span class="dv">87</span>,<span class="dv">99</span>,<span class="dv">22</span>,<span class="dv">44</span>)</span>
<span id="cb19-2"><a href="基本介绍.html#cb19-2" tabindex="-1"></a><span class="fu">print</span>(math_score)</span></code></pre></div>
<pre><code>## [1] 60 75 87 99 22 44</code></pre>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="基本介绍.html#cb21-1" tabindex="-1"></a>student_name <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;小赵&quot;</span>,<span class="st">&quot;小钱&quot;</span>,<span class="st">&quot;小孙&quot;</span>,<span class="st">&quot;小李&quot;</span>,<span class="st">&quot;小周&quot;</span>,<span class="st">&quot;小吴&quot;</span>)</span>
<span id="cb21-2"><a href="基本介绍.html#cb21-2" tabindex="-1"></a><span class="fu">print</span>(student_name)</span></code></pre></div>
<pre><code>## [1] &quot;小赵&quot; &quot;小钱&quot; &quot;小孙&quot; &quot;小李&quot; &quot;小周&quot; &quot;小吴&quot;</code></pre>
<p>向量中的值被称为<strong>元素(element)</strong>。使用<code>names()</code>函数可以给向量内的元素命名。在创立向量时，也可以直接给元素命名。</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="基本介绍.html#cb23-1" tabindex="-1"></a><span class="co"># 使用 names() 函数</span></span>
<span id="cb23-2"><a href="基本介绍.html#cb23-2" tabindex="-1"></a><span class="fu">names</span>(math_score) <span class="ot">&lt;-</span> student_name</span>
<span id="cb23-3"><a href="基本介绍.html#cb23-3" tabindex="-1"></a><span class="fu">print</span>(math_score)</span></code></pre></div>
<pre><code>## 小赵 小钱 小孙 小李 小周 小吴 
##   60   75   87   99   22   44</code></pre>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="基本介绍.html#cb25-1" tabindex="-1"></a><span class="co"># 创立向量时命名</span></span>
<span id="cb25-2"><a href="基本介绍.html#cb25-2" tabindex="-1"></a>english_score <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;小赵&quot;</span><span class="ot">=</span><span class="dv">85</span>, <span class="st">&quot;小钱&quot;</span><span class="ot">=</span><span class="dv">70</span>, <span class="st">&quot;小孙&quot;</span><span class="ot">=</span><span class="dv">42</span>,<span class="st">&quot;小李&quot;</span><span class="ot">=</span><span class="dv">95</span>,<span class="st">&quot;小周&quot;</span><span class="ot">=</span><span class="dv">39</span>,<span class="st">&quot;小吴&quot;</span><span class="ot">=</span><span class="dv">67</span>)</span>
<span id="cb25-3"><a href="基本介绍.html#cb25-3" tabindex="-1"></a><span class="fu">print</span>(english_score)</span></code></pre></div>
<pre><code>## 小赵 小钱 小孙 小李 小周 小吴 
##   85   70   42   95   39   67</code></pre>
<p>获取向量长度可以使用<code>length()</code>函数。</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="基本介绍.html#cb27-1" tabindex="-1"></a><span class="fu">length</span>(math_score)</span></code></pre></div>
<pre><code>## [1] 6</code></pre>
<p>获取向量中的特定元素：</p>
<li>
当知道元素名称时，可以根据元素名称获取元素。
</li>
<li>
有些向量并未给元素命名，此时也可以根据<strong>索引(index)</strong>获取元素。
</li>
<p><strong><em>注意</em></strong>：</p>
<li>
元素的索引从1开始，直至最后一个元素(索引为向量的长度)。
</li>
<li>
当需要获取多个元素时，可以使用名称或者使用索引<strong>切片(slice)</strong>。
</li>
<li>
当需要获取<u>连续的</u>多个元素时，使用索引切片更为方便。
</li>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="基本介绍.html#cb29-1" tabindex="-1"></a><span class="co"># 使用元素名称获取单个元素</span></span>
<span id="cb29-2"><a href="基本介绍.html#cb29-2" tabindex="-1"></a>math_score[<span class="st">&quot;小赵&quot;</span>]</span></code></pre></div>
<pre><code>## 小赵 
##   60</code></pre>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb31-1"><a href="基本介绍.html#cb31-1" tabindex="-1"></a><span class="co"># 使用名称获取多个元素，注意需要使用c()生成向量</span></span>
<span id="cb31-2"><a href="基本介绍.html#cb31-2" tabindex="-1"></a>math_score[<span class="fu">c</span>(<span class="st">&quot;小赵&quot;</span>,<span class="st">&quot;小李&quot;</span>)]</span></code></pre></div>
<pre><code>## 小赵 小李 
##   60   99</code></pre>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="基本介绍.html#cb33-1" tabindex="-1"></a><span class="co"># 使用索引获取多个元素</span></span>
<span id="cb33-2"><a href="基本介绍.html#cb33-2" tabindex="-1"></a>math_score[<span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">4</span>,<span class="dv">5</span>)]</span></code></pre></div>
<pre><code>## 小赵 小李 小周 
##   60   99   22</code></pre>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb35-1"><a href="基本介绍.html#cb35-1" tabindex="-1"></a><span class="co"># 使用索引切片获取连续的多个元素</span></span>
<span id="cb35-2"><a href="基本介绍.html#cb35-2" tabindex="-1"></a>math_score[<span class="dv">3</span><span class="sc">:</span><span class="fu">length</span>(math_score)] <span class="co"># 顺序获取元素</span></span></code></pre></div>
<pre><code>## 小孙 小李 小周 小吴 
##   87   99   22   44</code></pre>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb37-1"><a href="基本介绍.html#cb37-1" tabindex="-1"></a>math_score[<span class="fu">length</span>(math_score)<span class="sc">:</span><span class="dv">3</span>] <span class="co"># 逆序获取元素</span></span></code></pre></div>
<pre><code>## 小吴 小周 小李 小孙 
##   44   22   99   87</code></pre>
<p>向向量添加元素可以使用<code>append()</code>函数。参数包括：</p>
<li>
<code>vec</code>指目标向量，即要把元素添加到的向量。
</li>
<li>
<code>value</code>指目标元素，即想要添加的元素。如果是单个元素，直接写赋值，如果是多个元素，需要使用<code>c()</code>函数。
</li>
<li>
<code>index</code>是可选参数，即要把新添加的元素插入到原先向量中哪个索引位置的<em>后面</em>，默认是插入到原有向量末尾。
</li>
<p><strong><em>注意</em></strong>：需要重新赋值变量才能将新生成的向量保存。</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb39-1"><a href="基本介绍.html#cb39-1" tabindex="-1"></a>new_score <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">55</span>, <span class="dv">89</span>)</span>
<span id="cb39-2"><a href="基本介绍.html#cb39-2" tabindex="-1"></a><span class="co"># 未给定插入位置</span></span>
<span id="cb39-3"><a href="基本介绍.html#cb39-3" tabindex="-1"></a>english_score_new <span class="ot">&lt;-</span> <span class="fu">append</span>(english_score, new_score) </span>
<span id="cb39-4"><a href="基本介绍.html#cb39-4" tabindex="-1"></a>english_score_new</span></code></pre></div>
<pre><code>## 小赵 小钱 小孙 小李 小周 小吴           
##   85   70   42   95   39   67   55   89</code></pre>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb41-1"><a href="基本介绍.html#cb41-1" tabindex="-1"></a><span class="co"># 给定插入位置</span></span>
<span id="cb41-2"><a href="基本介绍.html#cb41-2" tabindex="-1"></a>english_score_new2 <span class="ot">&lt;-</span> <span class="fu">append</span>(english_score, new_score, <span class="dv">2</span>) </span>
<span id="cb41-3"><a href="基本介绍.html#cb41-3" tabindex="-1"></a>english_score_new2</span></code></pre></div>
<pre><code>## 小赵 小钱           小孙 小李 小周 小吴 
##   85   70   55   89   42   95   39   67</code></pre>
<p>从向量移除元素可以使用 <code>-</code> 号。</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb43-1"><a href="基本介绍.html#cb43-1" tabindex="-1"></a><span class="co"># 从english_score_new向量移除第2个索引的元素</span></span>
<span id="cb43-2"><a href="基本介绍.html#cb43-2" tabindex="-1"></a>english_score_new[<span class="sc">-</span><span class="dv">2</span>]</span></code></pre></div>
<pre><code>## 小赵 小孙 小李 小周 小吴           
##   85   42   95   39   67   55   89</code></pre>
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb45-1"><a href="基本介绍.html#cb45-1" tabindex="-1"></a><span class="co">#从english_score_new向量移除第2至第4个索引的元素</span></span>
<span id="cb45-2"><a href="基本介绍.html#cb45-2" tabindex="-1"></a>english_score_new[<span class="sc">-</span><span class="fu">c</span>(<span class="dv">2</span><span class="sc">:</span><span class="dv">4</span>)]</span></code></pre></div>
<pre><code>## 小赵 小周 小吴           
##   85   39   67   55   89</code></pre>
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb47-1"><a href="基本介绍.html#cb47-1" tabindex="-1"></a><span class="co">#从english_score_new向量移除第2、5、7个索引的元素</span></span>
<span id="cb47-2"><a href="基本介绍.html#cb47-2" tabindex="-1"></a>english_score_new[<span class="sc">-</span><span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">5</span>,<span class="dv">7</span>)]</span></code></pre></div>
<pre><code>## 小赵 小孙 小李 小吴      
##   85   42   95   67   89</code></pre>
<div id="按逻辑进行向量选择" class="section level3 hasAnchor" number="1.3.1">
<h3><span class="header-section-number">1.3.1</span> 按逻辑进行向量选择<a href="基本介绍.html#按逻辑进行向量选择" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>R中的逻辑运算符：</p>
<table>
<thead>
<tr class="header">
<th align="left"><strong>运算符</strong></th>
<th align="left"><strong>含义</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">＜</td>
<td align="left">小于</td>
</tr>
<tr class="even">
<td align="left">＞</td>
<td align="left">大于</td>
</tr>
<tr class="odd">
<td align="left">＜=</td>
<td align="left">小于等于</td>
</tr>
<tr class="even">
<td align="left">＞=</td>
<td align="left">大于等于</td>
</tr>
<tr class="odd">
<td align="left">==</td>
<td align="left">等于</td>
</tr>
<tr class="even">
<td align="left">!=</td>
<td align="left">不等于</td>
</tr>
<tr class="odd">
<td align="left">%in%</td>
<td align="left">包含</td>
</tr>
<tr class="even">
<td align="left">&amp;</td>
<td align="left">和</td>
</tr>
<tr class="odd">
<td align="left">|</td>
<td align="left">或</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb49"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb49-1"><a href="基本介绍.html#cb49-1" tabindex="-1"></a><span class="co"># 创建bmi向量</span></span>
<span id="cb49-2"><a href="基本介绍.html#cb49-2" tabindex="-1"></a>bmi <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fl">26.5</span>, <span class="fl">22.4</span>, <span class="cn">NA</span>, <span class="fl">25.5</span>, <span class="dv">31</span>, <span class="dv">27</span>, <span class="dv">20</span>, <span class="cn">NA</span>, <span class="fl">19.4</span>, <span class="dv">23</span>, <span class="dv">30</span>)</span>
<span id="cb49-3"><a href="基本介绍.html#cb49-3" tabindex="-1"></a></span>
<span id="cb49-4"><a href="基本介绍.html#cb49-4" tabindex="-1"></a><span class="co"># 筛选BMI&lt;24的元素</span></span>
<span id="cb49-5"><a href="基本介绍.html#cb49-5" tabindex="-1"></a>bmi[bmi<span class="sc">&lt;</span><span class="dv">24</span>]</span></code></pre></div>
<pre><code>## [1] 22.4   NA 20.0   NA 19.4 23.0</code></pre>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb51-1"><a href="基本介绍.html#cb51-1" tabindex="-1"></a><span class="co"># 筛选BMI&gt;28的元素</span></span>
<span id="cb51-2"><a href="基本介绍.html#cb51-2" tabindex="-1"></a>bmi[bmi<span class="sc">&gt;</span><span class="dv">28</span>] </span></code></pre></div>
<pre><code>## [1] NA 31 NA 30</code></pre>
<div class="sourceCode" id="cb53"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb53-1"><a href="基本介绍.html#cb53-1" tabindex="-1"></a><span class="co"># 筛选BMI&lt;=20或者&gt;=30的元素</span></span>
<span id="cb53-2"><a href="基本介绍.html#cb53-2" tabindex="-1"></a>bmi[(bmi<span class="sc">&lt;=</span><span class="dv">20</span>)<span class="sc">|</span>(bmi<span class="sc">&gt;=</span><span class="dv">30</span>)] </span></code></pre></div>
<pre><code>## [1]   NA 31.0 20.0   NA 19.4 30.0</code></pre>
<div class="sourceCode" id="cb55"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb55-1"><a href="基本介绍.html#cb55-1" tabindex="-1"></a><span class="co"># 筛选BMI在向量(26,27,28,29,30)内的元素</span></span>
<span id="cb55-2"><a href="基本介绍.html#cb55-2" tabindex="-1"></a>bmi[bmi <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">26</span><span class="sc">:</span><span class="dv">30</span>)] </span></code></pre></div>
<pre><code>## [1] 27 30</code></pre>
<div class="sourceCode" id="cb57"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb57-1"><a href="基本介绍.html#cb57-1" tabindex="-1"></a><span class="co"># 筛选BMI在[24,30]范围内的元素</span></span>
<span id="cb57-2"><a href="基本介绍.html#cb57-2" tabindex="-1"></a>bmi[(bmi<span class="sc">&gt;=</span><span class="dv">24</span>)<span class="sc">&amp;</span>(bmi<span class="sc">&lt;=</span><span class="dv">30</span>)] </span></code></pre></div>
<pre><code>## [1] 26.5   NA 25.5 27.0   NA 30.0</code></pre>
</div>
<div id="向量的极值" class="section level3 hasAnchor" number="1.3.2">
<h3><span class="header-section-number">1.3.2</span> 向量的极值<a href="基本介绍.html#向量的极值" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>我们可以使用<code>max()</code>和<code>min()</code>函数分别获得向量的最大与最小值。</p>
<p>我们还可以使用<code>which.max()</code>和<code>which.min()</code>函数分别获得向量的最大与最小值对应的索引值。</p>
<div class="sourceCode" id="cb59"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb59-1"><a href="基本介绍.html#cb59-1" tabindex="-1"></a><span class="co"># max()函数默认不会排除NA</span></span>
<span id="cb59-2"><a href="基本介绍.html#cb59-2" tabindex="-1"></a><span class="fu">max</span>(bmi) </span></code></pre></div>
<pre><code>## [1] NA</code></pre>
<div class="sourceCode" id="cb61"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb61-1"><a href="基本介绍.html#cb61-1" tabindex="-1"></a><span class="fu">max</span>(bmi, <span class="at">na.rm=</span><span class="cn">TRUE</span>) </span></code></pre></div>
<pre><code>## [1] 31</code></pre>
<div class="sourceCode" id="cb63"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb63-1"><a href="基本介绍.html#cb63-1" tabindex="-1"></a><span class="co"># 返回最大值的索引值，这里的索引值是包含缺失值在内的索引值</span></span>
<span id="cb63-2"><a href="基本介绍.html#cb63-2" tabindex="-1"></a><span class="fu">which.max</span>(bmi) </span></code></pre></div>
<pre><code>## [1] 5</code></pre>
<div class="sourceCode" id="cb65"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb65-1"><a href="基本介绍.html#cb65-1" tabindex="-1"></a><span class="fu">which</span>(bmi <span class="sc">==</span> <span class="fu">max</span>(bmi, <span class="at">na.rm=</span><span class="cn">TRUE</span>))</span></code></pre></div>
<pre><code>## [1] 5</code></pre>
</div>
</div>
<div id="缺失值" class="section level2 hasAnchor" number="1.4">
<h2><span class="header-section-number">1.4</span> 缺失值<a href="基本介绍.html#缺失值" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>缺失值通常有三种显示形式：<code>NaN</code>（Not a Number，<strong>非数值</strong>）、<code>NULL</code>（absence of value，<strong>空值</strong>）和 <code>NA</code>（Not Available，<strong>缺失值</strong>）</p>
<div id="nan" class="section level3 hasAnchor" number="1.4.1">
<h3><span class="header-section-number">1.4.1</span> NaN<a href="基本介绍.html#nan" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>R中的有些运算会导致结果为<strong>非数值</strong>，显示为<code>NaN</code>，可以用<code>is.nan()</code>函数来判断。</p>
<div class="sourceCode" id="cb67"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb67-1"><a href="基本介绍.html#cb67-1" tabindex="-1"></a><span class="dv">0</span><span class="sc">/</span><span class="dv">0</span></span></code></pre></div>
<pre><code>## [1] NaN</code></pre>
<div class="sourceCode" id="cb69"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb69-1"><a href="基本介绍.html#cb69-1" tabindex="-1"></a><span class="fu">is.nan</span>(<span class="dv">0</span><span class="sc">/</span><span class="dv">0</span>)</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
</div>
<div id="null" class="section level3 hasAnchor" number="1.4.2">
<h3><span class="header-section-number">1.4.2</span> NULL<a href="基本介绍.html#null" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>R中的<code>NULL</code>表示空值，即没有内容，<strong>长度为0且不占位置</strong>，常用来<u>初始化变量</u>。可以用<code>is.null()</code>函数来判断。</p>
<div class="sourceCode" id="cb71"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb71-1"><a href="基本介绍.html#cb71-1" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="cn">NULL</span></span>
<span id="cb71-2"><a href="基本介绍.html#cb71-2" tabindex="-1"></a><span class="fu">length</span>(x)</span></code></pre></div>
<pre><code>## [1] 0</code></pre>
<div class="sourceCode" id="cb73"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb73-1"><a href="基本介绍.html#cb73-1" tabindex="-1"></a><span class="fu">is.null</span>(x)</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
</div>
<div id="na" class="section level3 hasAnchor" number="1.4.3">
<h3><span class="header-section-number">1.4.3</span> NA<a href="基本介绍.html#na" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><code>NA</code>是R中真正意义上的缺失值。可以用<code>is.na()</code>函数来判断。</p>
<div class="sourceCode" id="cb75"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb75-1"><a href="基本介绍.html#cb75-1" tabindex="-1"></a><span class="co"># 获取缺失值数目</span></span>
<span id="cb75-2"><a href="基本介绍.html#cb75-2" tabindex="-1"></a><span class="fu">sum</span>(<span class="fu">is.na</span>(bmi)) </span></code></pre></div>
<pre><code>## [1] 2</code></pre>
<div class="sourceCode" id="cb77"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb77-1"><a href="基本介绍.html#cb77-1" tabindex="-1"></a><span class="co"># 获取缺失值的索引值</span></span>
<span id="cb77-2"><a href="基本介绍.html#cb77-2" tabindex="-1"></a><span class="fu">which</span>(<span class="fu">is.na</span>(bmi))</span></code></pre></div>
<pre><code>## [1] 3 8</code></pre>
<div class="sourceCode" id="cb79"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb79-1"><a href="基本介绍.html#cb79-1" tabindex="-1"></a><span class="co"># 移除缺失值</span></span>
<span id="cb79-2"><a href="基本介绍.html#cb79-2" tabindex="-1"></a>bmi[<span class="sc">!</span><span class="fu">is.na</span>(bmi)] </span></code></pre></div>
<pre><code>## [1] 26.5 22.4 25.5 31.0 27.0 20.0 19.4 23.0 30.0</code></pre>
<div class="sourceCode" id="cb81"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb81-1"><a href="基本介绍.html#cb81-1" tabindex="-1"></a><span class="co"># 移除缺失值，同时显示缺失值的索引值</span></span>
<span id="cb81-2"><a href="基本介绍.html#cb81-2" tabindex="-1"></a><span class="fu">na.omit</span>(bmi) </span></code></pre></div>
<pre><code>## [1] 26.5 22.4 25.5 31.0 27.0 20.0 19.4 23.0 30.0
## attr(,&quot;na.action&quot;)
## [1] 3 8
## attr(,&quot;class&quot;)
## [1] &quot;omit&quot;</code></pre>
<p>在处理含有缺失值的向量时，很多函数在<em>默认参数</em>下不能工作。</p>
<div class="sourceCode" id="cb83"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb83-1"><a href="基本介绍.html#cb83-1" tabindex="-1"></a><span class="co"># 有缺失值时，函数在默认参数下不能工作</span></span>
<span id="cb83-2"><a href="基本介绍.html#cb83-2" tabindex="-1"></a><span class="fu">mean</span>(bmi) </span></code></pre></div>
<pre><code>## [1] NA</code></pre>
<div class="sourceCode" id="cb85"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb85-1"><a href="基本介绍.html#cb85-1" tabindex="-1"></a><span class="co"># 移除缺失值之后计算均值</span></span>
<span id="cb85-2"><a href="基本介绍.html#cb85-2" tabindex="-1"></a><span class="fu">mean</span>(bmi, <span class="at">na.rm=</span><span class="cn">TRUE</span>) </span></code></pre></div>
<pre><code>## [1] 24.97778</code></pre>
<div class="sourceCode" id="cb87"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb87-1"><a href="基本介绍.html#cb87-1" tabindex="-1"></a><span class="co"># 复制向量</span></span>
<span id="cb87-2"><a href="基本介绍.html#cb87-2" tabindex="-1"></a>bmi_impute <span class="ot">&lt;-</span> bmi </span>
<span id="cb87-3"><a href="基本介绍.html#cb87-3" tabindex="-1"></a></span>
<span id="cb87-4"><a href="基本介绍.html#cb87-4" tabindex="-1"></a><span class="co"># 对向量进行均值填补</span></span>
<span id="cb87-5"><a href="基本介绍.html#cb87-5" tabindex="-1"></a>bmi_impute[<span class="fu">is.na</span>(bmi_impute)] <span class="ot">&lt;-</span> <span class="fu">mean</span>(bmi_impute, <span class="at">na.rm=</span><span class="cn">TRUE</span>) </span>
<span id="cb87-6"><a href="基本介绍.html#cb87-6" tabindex="-1"></a></span>
<span id="cb87-7"><a href="基本介绍.html#cb87-7" tabindex="-1"></a><span class="co"># 填补只会作用于（复制后的）目标向量，对初始向量无影响</span></span>
<span id="cb87-8"><a href="基本介绍.html#cb87-8" tabindex="-1"></a><span class="fu">writeLines</span>(<span class="fu">paste0</span>(<span class="st">&quot;填补后的目标向量为：&quot;</span>, <span class="fu">list</span>(<span class="fu">round</span>(bmi_impute, <span class="dv">2</span>)), <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span>, <span class="st">&quot;填补后的初始向量为：&quot;</span>, <span class="fu">list</span>(bmi))) </span></code></pre></div>
<pre><code>## 填补后的目标向量为：c(26.5, 22.4, 24.98, 25.5, 31, 27, 20, 24.98, 19.4, 23, 30)
## 填补后的初始向量为：c(26.5, 22.4, NA, 25.5, 31, 27, 20, NA, 19.4, 23, 30)</code></pre>
</div>
</div>
<div id="chapter1-label-matrix" class="section level2 hasAnchor" number="1.5">
<h2><span class="header-section-number">1.5</span> 矩阵<a href="基本介绍.html#chapter1-label-matrix" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>矩阵(matrix)</strong>是m×n个数按照m行n列的方式排列形成的数表。R中的矩阵(matrix)可以通过<code>matrix()</code>函数、<code>cbind()</code>或<code>rbind()</code>函数生成。</p>
<li>
<code>matrix()</code>函数用于将向量转变为m×n的矩阵，输入向量的长度必须等于m×n。
</li>
<li>
<code>cbind()</code>函数指<code>column bind</code>，即<strong>列</strong>的叠加，要求输入的向量或矩阵的<strong>行数</strong>相同。
</li>
<li>
<code>rbind()</code>函数指<code>row bind</code>，即<strong>行</strong>的叠加，要求输入的向量或矩阵的<strong>列数</strong>相同。
</li>
<div class="sourceCode" id="cb89"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb89-1"><a href="基本介绍.html#cb89-1" tabindex="-1"></a><span class="co"># 创建向量</span></span>
<span id="cb89-2"><a href="基本介绍.html#cb89-2" tabindex="-1"></a>var_vector <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">5</span>,<span class="dv">6</span>)</span>
<span id="cb89-3"><a href="基本介绍.html#cb89-3" tabindex="-1"></a></span>
<span id="cb89-4"><a href="基本介绍.html#cb89-4" tabindex="-1"></a><span class="co"># matrix()函数生成矩阵</span></span>
<span id="cb89-5"><a href="基本介绍.html#cb89-5" tabindex="-1"></a>var_matrix <span class="ot">&lt;-</span> <span class="fu">matrix</span>(var_vector, <span class="at">nrow=</span><span class="dv">2</span>) </span>
<span id="cb89-6"><a href="基本介绍.html#cb89-6" tabindex="-1"></a>var_matrix</span></code></pre></div>
<pre><code>##      [,1] [,2] [,3]
## [1,]    1    3    5
## [2,]    2    4    6</code></pre>
<div class="sourceCode" id="cb91"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb91-1"><a href="基本介绍.html#cb91-1" tabindex="-1"></a><span class="co"># 列叠加</span></span>
<span id="cb91-2"><a href="基本介绍.html#cb91-2" tabindex="-1"></a><span class="fu">cbind</span>(var_matrix, var_matrix)</span></code></pre></div>
<pre><code>##      [,1] [,2] [,3] [,4] [,5] [,6]
## [1,]    1    3    5    1    3    5
## [2,]    2    4    6    2    4    6</code></pre>
<div class="sourceCode" id="cb93"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb93-1"><a href="基本介绍.html#cb93-1" tabindex="-1"></a><span class="co"># 行叠加</span></span>
<span id="cb93-2"><a href="基本介绍.html#cb93-2" tabindex="-1"></a><span class="fu">rbind</span>(var_matrix, var_matrix)</span></code></pre></div>
<pre><code>##      [,1] [,2] [,3]
## [1,]    1    3    5
## [2,]    2    4    6
## [3,]    1    3    5
## [4,]    2    4    6</code></pre>
<p>矩阵的转置使用<code>t()</code>函数,<code>t</code>指<code>transpose</code>。</p>
<div class="sourceCode" id="cb95"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb95-1"><a href="基本介绍.html#cb95-1" tabindex="-1"></a><span class="fu">t</span>(var_matrix)</span></code></pre></div>
<pre><code>##      [,1] [,2]
## [1,]    1    2
## [2,]    3    4
## [3,]    5    6</code></pre>
<p>矩阵中元素的提取采用<code>[行索引,列索引]</code>的方式。</p>
<div class="sourceCode" id="cb97"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb97-1"><a href="基本介绍.html#cb97-1" tabindex="-1"></a><span class="co"># 提取第1行第2列的元素</span></span>
<span id="cb97-2"><a href="基本介绍.html#cb97-2" tabindex="-1"></a>var_matrix[<span class="dv">1</span>,<span class="dv">2</span>] </span></code></pre></div>
<pre><code>## [1] 3</code></pre>
<div class="sourceCode" id="cb99"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb99-1"><a href="基本介绍.html#cb99-1" tabindex="-1"></a><span class="co"># 提取第1行第2、3列的元素</span></span>
<span id="cb99-2"><a href="基本介绍.html#cb99-2" tabindex="-1"></a>var_matrix[<span class="dv">1</span>,<span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">3</span>)] </span></code></pre></div>
<pre><code>## [1] 3 5</code></pre>
<div class="sourceCode" id="cb101"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb101-1"><a href="基本介绍.html#cb101-1" tabindex="-1"></a><span class="co"># 提取第1行的所有元素</span></span>
<span id="cb101-2"><a href="基本介绍.html#cb101-2" tabindex="-1"></a>var_matrix[<span class="dv">1</span>,]</span></code></pre></div>
<pre><code>## [1] 1 3 5</code></pre>
<div class="sourceCode" id="cb103"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb103-1"><a href="基本介绍.html#cb103-1" tabindex="-1"></a><span class="co"># 提取第2列的所有元素</span></span>
<span id="cb103-2"><a href="基本介绍.html#cb103-2" tabindex="-1"></a>var_matrix[,<span class="dv">2</span>] </span></code></pre></div>
<pre><code>## [1] 3 4</code></pre>
<p>采用<code>dim()</code>函数（<code>dim</code>指<code>dimension</code>）获取矩阵的维度，<code>nrow()</code>函数获取矩阵的行数，<code>ncol()</code>函数获取矩阵的列数。</p>
<div class="sourceCode" id="cb105"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb105-1"><a href="基本介绍.html#cb105-1" tabindex="-1"></a><span class="co"># 获取维度</span></span>
<span id="cb105-2"><a href="基本介绍.html#cb105-2" tabindex="-1"></a><span class="fu">dim</span>(var_matrix)</span></code></pre></div>
<pre><code>## [1] 2 3</code></pre>
<div class="sourceCode" id="cb107"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb107-1"><a href="基本介绍.html#cb107-1" tabindex="-1"></a><span class="co"># 获取行数</span></span>
<span id="cb107-2"><a href="基本介绍.html#cb107-2" tabindex="-1"></a><span class="fu">nrow</span>(var_matrix)</span></code></pre></div>
<pre><code>## [1] 2</code></pre>
<div class="sourceCode" id="cb109"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb109-1"><a href="基本介绍.html#cb109-1" tabindex="-1"></a><span class="co"># 获取列数</span></span>
<span id="cb109-2"><a href="基本介绍.html#cb109-2" tabindex="-1"></a><span class="fu">ncol</span>(var_matrix)</span></code></pre></div>
<pre><code>## [1] 3</code></pre>
</div>
<div id="数据框" class="section level2 hasAnchor" number="1.6">
<h2><span class="header-section-number">1.6</span> 数据框<a href="基本介绍.html#数据框" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>矩阵只能包含一个种类的数据。</p>
<div class="sourceCode" id="cb111"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb111-1"><a href="基本介绍.html#cb111-1" tabindex="-1"></a><span class="fu">cbind</span>(<span class="fu">c</span>(<span class="st">&quot;M&quot;</span>,<span class="st">&quot;F&quot;</span>), var_matrix)</span></code></pre></div>
<pre><code>##      [,1] [,2] [,3] [,4]
## [1,] &quot;M&quot;  &quot;1&quot;  &quot;3&quot;  &quot;5&quot; 
## [2,] &quot;F&quot;  &quot;2&quot;  &quot;4&quot;  &quot;6&quot;</code></pre>
<p>如上所示，当加入字符型数据后，矩阵中的数字也被<strong>强制转变</strong>为字符型（即被双引号包裹），这被称为<strong>隐式强制</strong>。因此，使用<strong>数据框(dataframe)</strong>可以存储不同类型的数据，保留原有数据的完整性。</p>
<div class="sourceCode" id="cb113"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb113-1"><a href="基本介绍.html#cb113-1" tabindex="-1"></a><span class="co"># 调用R自带iris数据框</span></span>
<span id="cb113-2"><a href="基本介绍.html#cb113-2" tabindex="-1"></a><span class="fu">data</span>(iris) </span>
<span id="cb113-3"><a href="基本介绍.html#cb113-3" tabindex="-1"></a></span>
<span id="cb113-4"><a href="基本介绍.html#cb113-4" tabindex="-1"></a><span class="co"># 查看数据类型</span></span>
<span id="cb113-5"><a href="基本介绍.html#cb113-5" tabindex="-1"></a><span class="fu">class</span>(iris) </span></code></pre></div>
<pre><code>## [1] &quot;data.frame&quot;</code></pre>
<div class="sourceCode" id="cb115"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb115-1"><a href="基本介绍.html#cb115-1" tabindex="-1"></a><span class="co"># 查看数据框维度</span></span>
<span id="cb115-2"><a href="基本介绍.html#cb115-2" tabindex="-1"></a><span class="fu">dim</span>(iris) </span></code></pre></div>
<pre><code>## [1] 150   5</code></pre>
<div class="sourceCode" id="cb117"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb117-1"><a href="基本介绍.html#cb117-1" tabindex="-1"></a><span class="co"># 查看数据框内的变量类型</span></span>
<span id="cb117-2"><a href="基本介绍.html#cb117-2" tabindex="-1"></a><span class="fu">str</span>(iris) </span></code></pre></div>
<pre><code>## &#39;data.frame&#39;:    150 obs. of  5 variables:
##  $ Sepal.Length: num  5.1 4.9 4.7 4.6 5 5.4 4.6 5 4.4 4.9 ...
##  $ Sepal.Width : num  3.5 3 3.2 3.1 3.6 3.9 3.4 3.4 2.9 3.1 ...
##  $ Petal.Length: num  1.4 1.4 1.3 1.5 1.4 1.7 1.4 1.5 1.4 1.5 ...
##  $ Petal.Width : num  0.2 0.2 0.2 0.2 0.2 0.4 0.3 0.2 0.2 0.1 ...
##  $ Species     : Factor w/ 3 levels &quot;setosa&quot;,&quot;versicolor&quot;,..: 1 1 1 1 1 1 1 1 1 1 ...</code></pre>
</div>
<div id="数组" class="section level2 hasAnchor" number="1.7">
<h2><span class="header-section-number">1.7</span> 数组<a href="基本介绍.html#数组" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>数组（array）</strong>是矩阵的扩展，可以将矩阵扩展至2维以上。1维数组相当于向量<a href="基本介绍.html#chapter1-label-vector">1.3</a>，2维数组相当于矩阵<a href="基本介绍.html#chapter1-label-matrix">1.5</a>。R中使用<code>array()</code>函数创建数组，主要的参数为：</p>
<li>
<code>X</code>输入数据，可以是向量或者矩阵。
</li>
<li>
<code>dim</code>输出维度，如果输出多维度，使用<code>c(m,n,k,..)</code>，其中m×n为最内层矩阵。
</li>
<div class="sourceCode" id="cb119"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb119-1"><a href="基本介绍.html#cb119-1" tabindex="-1"></a><span class="co"># 创建3×6维的数组</span></span>
<span id="cb119-2"><a href="基本介绍.html#cb119-2" tabindex="-1"></a>var_array1 <span class="ot">&lt;-</span> <span class="fu">array</span>(<span class="fu">seq</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">18</span>), <span class="at">dim=</span><span class="fu">c</span>(<span class="dv">3</span>,<span class="dv">6</span>)) </span>
<span id="cb119-3"><a href="基本介绍.html#cb119-3" tabindex="-1"></a>var_array1</span></code></pre></div>
<pre><code>##      [,1] [,2] [,3] [,4] [,5] [,6]
## [1,]    1    4    7   10   13   16
## [2,]    2    5    8   11   14   17
## [3,]    3    6    9   12   15   18</code></pre>
<div class="sourceCode" id="cb121"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb121-1"><a href="基本介绍.html#cb121-1" tabindex="-1"></a><span class="co"># 创建3×2×3维的数组 </span></span>
<span id="cb121-2"><a href="基本介绍.html#cb121-2" tabindex="-1"></a>var_array2 <span class="ot">&lt;-</span> <span class="fu">array</span>(<span class="fu">seq</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">18</span>), <span class="at">dim=</span><span class="fu">c</span>(<span class="dv">3</span>,<span class="dv">2</span>,<span class="dv">3</span>)) </span>
<span id="cb121-3"><a href="基本介绍.html#cb121-3" tabindex="-1"></a>var_array2</span></code></pre></div>
<pre><code>## , , 1
## 
##      [,1] [,2]
## [1,]    1    4
## [2,]    2    5
## [3,]    3    6
## 
## , , 2
## 
##      [,1] [,2]
## [1,]    7   10
## [2,]    8   11
## [3,]    9   12
## 
## , , 3
## 
##      [,1] [,2]
## [1,]   13   16
## [2,]   14   17
## [3,]   15   18</code></pre>
<div class="sourceCode" id="cb123"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb123-1"><a href="基本介绍.html#cb123-1" tabindex="-1"></a><span class="co"># 获取第3层的矩阵</span></span>
<span id="cb123-2"><a href="基本介绍.html#cb123-2" tabindex="-1"></a>var_array2[,,<span class="dv">3</span>] </span></code></pre></div>
<pre><code>##      [,1] [,2]
## [1,]   13   16
## [2,]   14   17
## [3,]   15   18</code></pre>
</div>
<div id="列表" class="section level2 hasAnchor" number="1.8">
<h2><span class="header-section-number">1.8</span> 列表<a href="基本介绍.html#列表" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>列表（list）</strong>是R语言的对象集合，可以用来保存不同类型的数据，使用<code>list()</code>函数创建。与<code>c()</code>函数<a href="基本介绍.html#chapter1-label-vector">1.3</a>不同，<code>list()</code>函数保留输入数据最初的数据结构，而<code>c()</code>函数将所有输入数据降维放入一个向量中。使用<code>unlist()</code>函数可以将列表转变为向量。</p>
<div class="sourceCode" id="cb125"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb125-1"><a href="基本介绍.html#cb125-1" tabindex="-1"></a>test_list <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="fu">c</span>(<span class="st">&quot;a&quot;</span>,<span class="st">&quot;b&quot;</span>,<span class="st">&quot;c&quot;</span>), <span class="dv">23</span>, <span class="fu">matrix</span>(<span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>),<span class="at">nrow=</span><span class="dv">2</span>)) </span>
<span id="cb125-2"><a href="基本介绍.html#cb125-2" tabindex="-1"></a><span class="fu">length</span>(test_list) </span></code></pre></div>
<pre><code>## [1] 3</code></pre>
<div class="sourceCode" id="cb127"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb127-1"><a href="基本介绍.html#cb127-1" tabindex="-1"></a>test_vector <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fu">c</span>(<span class="st">&quot;a&quot;</span>,<span class="st">&quot;b&quot;</span>,<span class="st">&quot;c&quot;</span>), <span class="dv">23</span>, <span class="fu">matrix</span>(<span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>),<span class="at">nrow=</span><span class="dv">2</span>)) </span>
<span id="cb127-2"><a href="基本介绍.html#cb127-2" tabindex="-1"></a><span class="fu">length</span>(test_vector)</span></code></pre></div>
<pre><code>## [1] 8</code></pre>
<div class="sourceCode" id="cb129"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb129-1"><a href="基本介绍.html#cb129-1" tabindex="-1"></a><span class="fu">length</span>(<span class="fu">unlist</span>(test_list)) <span class="co"># 使用`unlist()`函数将列表转变为向量</span></span></code></pre></div>
<pre><code>## [1] 8</code></pre>
<p>在获取列表元素时，如果采用<code>[]</code>+索引值的方式，返回的结果为包含该元素的<u>列表</u>。如果需要将列表元素提取为<u>向量</u>，则需采用<code>[[]]</code>+索引值的方式。如果列表的元素有名称，可以采用<code>$</code>或<code>[[]]</code>+名称的方式调用。</p>
<p>向列表添加元素可以使用<code>append()</code>函数。</p>
<p><strong><em>注意</em></strong>：如果需要将<strong>整个向量</strong>添加进原有列表中，必须先将向量转为列表形式，否则R会将向量中的元素<u>逐个添加</u>为列表的元素。</p>
<div class="sourceCode" id="cb131"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb131-1"><a href="基本介绍.html#cb131-1" tabindex="-1"></a><span class="co"># 使用[[]]获取列表中的元素</span></span>
<span id="cb131-2"><a href="基本介绍.html#cb131-2" tabindex="-1"></a>test_list[[<span class="dv">1</span>]] </span></code></pre></div>
<pre><code>## [1] &quot;a&quot; &quot;b&quot; &quot;c&quot;</code></pre>
<div class="sourceCode" id="cb133"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb133-1"><a href="基本介绍.html#cb133-1" tabindex="-1"></a><span class="co"># 如果列表的元素有名称，可以采用`$`调用</span></span>
<span id="cb133-2"><a href="基本介绍.html#cb133-2" tabindex="-1"></a><span class="co"># 给列表的元素命名</span></span>
<span id="cb133-3"><a href="基本介绍.html#cb133-3" tabindex="-1"></a><span class="fu">names</span>(test_list) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;vec&quot;</span>, <span class="st">&quot;n&quot;</span>, <span class="st">&quot;mtx&quot;</span>) </span>
<span id="cb133-4"><a href="基本介绍.html#cb133-4" tabindex="-1"></a></span>
<span id="cb133-5"><a href="基本介绍.html#cb133-5" tabindex="-1"></a><span class="co"># 使用&quot;$+名称&quot;调用列表元素</span></span>
<span id="cb133-6"><a href="基本介绍.html#cb133-6" tabindex="-1"></a>test_list<span class="sc">$</span>vec </span></code></pre></div>
<pre><code>## [1] &quot;a&quot; &quot;b&quot; &quot;c&quot;</code></pre>
<div class="sourceCode" id="cb135"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb135-1"><a href="基本介绍.html#cb135-1" tabindex="-1"></a><span class="co"># 使用&quot;[[名称]]&quot;调用列表元素</span></span>
<span id="cb135-2"><a href="基本介绍.html#cb135-2" tabindex="-1"></a>test_list[[<span class="st">&quot;vec&quot;</span>]] </span></code></pre></div>
<pre><code>## [1] &quot;a&quot; &quot;b&quot; &quot;c&quot;</code></pre>
<div class="sourceCode" id="cb137"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb137-1"><a href="基本介绍.html#cb137-1" tabindex="-1"></a><span class="co"># 整个添加向量</span></span>
<span id="cb137-2"><a href="基本介绍.html#cb137-2" tabindex="-1"></a><span class="fu">append</span>(test_list, <span class="fu">list</span>(<span class="fu">c</span>(<span class="cn">FALSE</span>, <span class="cn">FALSE</span>, <span class="cn">TRUE</span>))) </span></code></pre></div>
<pre><code>## $vec
## [1] &quot;a&quot; &quot;b&quot; &quot;c&quot;
## 
## $n
## [1] 23
## 
## $mtx
##      [,1] [,2]
## [1,]    1    3
## [2,]    2    4
## 
## [[4]]
## [1] FALSE FALSE  TRUE</code></pre>
<div class="sourceCode" id="cb139"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb139-1"><a href="基本介绍.html#cb139-1" tabindex="-1"></a><span class="co"># 逐个添加向量元素</span></span>
<span id="cb139-2"><a href="基本介绍.html#cb139-2" tabindex="-1"></a><span class="fu">append</span>(test_list, <span class="fu">c</span>(<span class="cn">FALSE</span>, <span class="cn">FALSE</span>, <span class="cn">TRUE</span>)) </span></code></pre></div>
<pre><code>## $vec
## [1] &quot;a&quot; &quot;b&quot; &quot;c&quot;
## 
## $n
## [1] 23
## 
## $mtx
##      [,1] [,2]
## [1,]    1    3
## [2,]    2    4
## 
## [[4]]
## [1] FALSE
## 
## [[5]]
## [1] FALSE
## 
## [[6]]
## [1] TRUE</code></pre>
</div>
<div id="字符串处理" class="section level2 hasAnchor" number="1.9">
<h2><span class="header-section-number">1.9</span> 字符串处理<a href="基本介绍.html#字符串处理" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>在处理数据过程中，通常会碰到<u>需要提取具有某一类特征的变量名</u>或者<u>需要从特定变量中筛选出包含某一类特征的字符串</u>的情况。<strong>正则表达式（regular expression）</strong>就是帮助我们<font color="red"><strong>识别特定字符串</strong></font>的工具。</p>
<p>R中可以使用<code>grep</code>函数、<code>grepl</code>函数或者调用<strong><em>stringr</em></strong>包的<code>str_view</code>函数进行正则表达式匹配：</p>
<li>
<code>grep</code>函数返回目标字符串所在的位置（即索引值）。
</li>
<li>
<code>grepl</code>函数返回逻辑向量。
</li>
<li>
<strong><em>stringr</em></strong>包的<code>str_view</code>函数返回目标字符串，<code>str_detect</code>函数返回逻辑向量。
</li>
<p>正则表达式主要依赖于元字符，其具体含义如下表：</p>
<table>
<thead>
<tr class="header">
<th align="left">元字符</th>
<th align="left">含义</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">[]</td>
<td align="left">匹配方括号内的任意字符（可以任意组合）</td>
</tr>
<tr class="even">
<td align="left">[^]</td>
<td align="left">匹配除方括号内字符以外的任意字符</td>
</tr>
<tr class="odd">
<td align="left">*</td>
<td align="left">匹配大于等于0个在<code>*</code>号之前的重复字符</td>
</tr>
<tr class="even">
<td align="left">+</td>
<td align="left">匹配至少1个在<code>+</code>号之前的重复字符</td>
</tr>
<tr class="odd">
<td align="left">?</td>
<td align="left">匹配至多1个在<code>+</code>号之前的重复字符</td>
</tr>
<tr class="even">
<td align="left">{n}</td>
<td align="left">匹配正好n个在<code>{}</code>号之前的字符</td>
</tr>
<tr class="odd">
<td align="left">{n,}</td>
<td align="left">匹配至少n个在<code>{}</code>号之前的字符</td>
</tr>
<tr class="even">
<td align="left">{n,m}</td>
<td align="left">匹配至少n个，至多m个在<code>{}</code>号之前的字符</td>
</tr>
<tr class="odd">
<td align="left">()</td>
<td align="left">匹配与括号内完全相同的字符（数目与排序必须完全一致）</td>
</tr>
<tr class="even">
<td align="left">|</td>
<td align="left">匹配<code>|</code>符号前或后的字符</td>
</tr>
<tr class="odd">
<td align="left">^</td>
<td align="left"><code>^</code>之后的字符位于开始端</td>
</tr>
<tr class="even">
<td align="left">$</td>
<td align="left"><code>$</code>之前的字匹配字符位于末端</td>
</tr>
<tr class="odd">
<td align="left">\</td>
<td align="left">转义字符，用于匹配保留的元字符 <code>.[]*+?{}()\^$</code></td>
</tr>
</tbody>
</table>
<p>正则表达式也提供一些常用的字符集简写，如下表所示：</p>
<table>
<thead>
<tr class="header">
<th align="left">简写</th>
<th align="left">含义</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">.</td>
<td align="left">除换行符外的所有字符</td>
</tr>
<tr class="even">
<td align="left">\d</td>
<td align="left">匹配所有数字，等同于<code>[0-9]</code></td>
</tr>
<tr class="odd">
<td align="left">\D</td>
<td align="left">匹配所有非数字，等同于<code>[^0-9]</code></td>
</tr>
<tr class="even">
<td align="left">\w</td>
<td align="left">匹配所有字母、数字和下划线，等同于<code>[a-zA-Z0-9_]</code></td>
</tr>
<tr class="odd">
<td align="left">\W</td>
<td align="left">匹配所有非字母、数字和下划线，等同于<code>[^a-zA-Z0-9_]</code></td>
</tr>
<tr class="even">
<td align="left">\t</td>
<td align="left">匹配水平制表符</td>
</tr>
<tr class="odd">
<td align="left">\n</td>
<td align="left">匹配换行符</td>
</tr>
<tr class="even">
<td align="left">\s</td>
<td align="left">匹配所有空格字符（空格、制表符或换行符）</td>
</tr>
<tr class="odd">
<td align="left">\S</td>
<td align="left">匹配所有非空格字符（空格、制表符或换符行）</td>
</tr>
</tbody>
</table>
<p><strong><em>注意</em></strong>：</p>
<li>
在R中使用正则表达式时，字符型常量中一个<code>\</code>要写成两个<code>\\</code>。
</li>
<li>
使用字符集简写时，<code>grep</code>函数的<code>perl</code>参数需要被设定成<code>TRUE</code>。
</li>
<div class="sourceCode" id="cb141"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb141-1"><a href="基本介绍.html#cb141-1" tabindex="-1"></a><span class="co"># 创建字符串向量</span></span>
<span id="cb141-2"><a href="基本介绍.html#cb141-2" tabindex="-1"></a>var_name <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;cn-Bmi_2014&quot;</span>, <span class="st">&quot;cn_-bMi-2015&quot;</span>, <span class="st">&quot;uk-bmi_2014&quot;</span>, <span class="st">&quot;uk-bm i_2015&quot;</span>, <span class="st">&quot;ck_bmi_2014&quot;</span>, <span class="st">&quot;ck_bmi_2015&quot;</span>, <span class="st">&quot;cn_bim_2014&quot;</span>, <span class="st">&quot;uk_bim_2014&quot;</span>, <span class="st">&quot;ck_b im_2014&quot;</span>)</span>
<span id="cb141-3"><a href="基本介绍.html#cb141-3" tabindex="-1"></a></span>
<span id="cb141-4"><a href="基本介绍.html#cb141-4" tabindex="-1"></a><span class="co"># 查找包含BMI的变量</span></span>
<span id="cb141-5"><a href="基本介绍.html#cb141-5" tabindex="-1"></a>var_name[<span class="fu">grep</span>(<span class="st">&quot;bmi|bm i&quot;</span>, var_name, <span class="at">ignore.case=</span><span class="cn">TRUE</span>)]</span></code></pre></div>
<pre><code>## [1] &quot;cn-Bmi_2014&quot;  &quot;cn_-bMi-2015&quot; &quot;uk-bmi_2014&quot;  &quot;uk-bm i_2015&quot; &quot;ck_bmi_2014&quot; 
## [6] &quot;ck_bmi_2015&quot;</code></pre>
<div class="sourceCode" id="cb143"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb143-1"><a href="基本介绍.html#cb143-1" tabindex="-1"></a><span class="co"># 查找cn和uk的BMI变量</span></span>
<span id="cb143-2"><a href="基本介绍.html#cb143-2" tabindex="-1"></a>var_name[<span class="fu">grep</span>(<span class="st">&quot;^(cn|uk)[</span><span class="sc">\\</span><span class="st">w-]+bmi&quot;</span>, var_name, <span class="at">ignore.case=</span><span class="cn">TRUE</span>, <span class="at">perl=</span><span class="cn">TRUE</span>)]</span></code></pre></div>
<pre><code>## [1] &quot;cn-Bmi_2014&quot;  &quot;cn_-bMi-2015&quot; &quot;uk-bmi_2014&quot;</code></pre>
<div class="sourceCode" id="cb145"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb145-1"><a href="基本介绍.html#cb145-1" tabindex="-1"></a><span class="co"># 查找ck 2014年的变量</span></span>
<span id="cb145-2"><a href="基本介绍.html#cb145-2" tabindex="-1"></a>var_name[<span class="fu">grep</span>(<span class="st">&quot;^ck[</span><span class="sc">\\</span><span class="st">w</span><span class="sc">\\</span><span class="st">s-]+2014$&quot;</span>, var_name, <span class="at">ignore.case=</span><span class="cn">TRUE</span>, <span class="at">perl=</span><span class="cn">TRUE</span>)]</span></code></pre></div>
<pre><code>## [1] &quot;ck_bmi_2014&quot;  &quot;ck_b im_2014&quot;</code></pre>
<div class="sourceCode" id="cb147"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb147-1"><a href="基本介绍.html#cb147-1" tabindex="-1"></a><span class="co"># 调用包</span></span>
<span id="cb147-2"><a href="基本介绍.html#cb147-2" tabindex="-1"></a><span class="fu">library</span>(stringr)</span>
<span id="cb147-3"><a href="基本介绍.html#cb147-3" tabindex="-1"></a><span class="fu">str_view</span>(var_name, <span class="st">&quot;bmi&quot;</span>) <span class="co"># 大小写敏感</span></span></code></pre></div>
<pre><code>## [3] │ uk-&lt;bmi&gt;_2014
## [5] │ ck_&lt;bmi&gt;_2014
## [6] │ ck_&lt;bmi&gt;_2015</code></pre>
<div class="sourceCode" id="cb149"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb149-1"><a href="基本介绍.html#cb149-1" tabindex="-1"></a><span class="co"># 默认大小写敏感，如果想忽略大小写，需要用regex(ignore_case=TRUE)说明</span></span>
<span id="cb149-2"><a href="基本介绍.html#cb149-2" tabindex="-1"></a><span class="fu">str_view</span>(var_name, <span class="fu">regex</span>(<span class="st">&quot;bmi&quot;</span>, <span class="at">ignore_case=</span><span class="cn">TRUE</span>)) </span></code></pre></div>
<pre><code>## [1] │ cn-&lt;Bmi&gt;_2014
## [2] │ cn_-&lt;bMi&gt;-2015
## [3] │ uk-&lt;bmi&gt;_2014
## [5] │ ck_&lt;bmi&gt;_2014
## [6] │ ck_&lt;bmi&gt;_2015</code></pre>
<p>有时我们也会碰到在字符串的前后有空格的情况，这时我们可以用<code>[\\s]*</code>去进行正则表达式匹配或者使用<strong><em>stringr</em></strong>包的<code>str_trim()</code>函数移除位于字符串两端的空格。如果需要移除字符串中间的多余空格（即仅保留一个空格），可以使用<code>str_squish()</code>函数。</p>
<div class="sourceCode" id="cb151"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb151-1"><a href="基本介绍.html#cb151-1" tabindex="-1"></a><span class="fu">library</span>(stringr)</span>
<span id="cb151-2"><a href="基本介绍.html#cb151-2" tabindex="-1"></a>trim_vector <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot; the &quot;</span>, <span class="st">&quot; good&quot;</span>, <span class="st">&quot;b  ad &quot;</span>)</span>
<span id="cb151-3"><a href="基本介绍.html#cb151-3" tabindex="-1"></a><span class="fu">str_trim</span>(trim_vector)</span></code></pre></div>
<pre><code>## [1] &quot;the&quot;   &quot;good&quot;  &quot;b  ad&quot;</code></pre>
<div class="sourceCode" id="cb153"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb153-1"><a href="基本介绍.html#cb153-1" tabindex="-1"></a>trim_string <span class="ot">&lt;-</span> <span class="st">&quot; Marry   has a  little lamb. &quot;</span></span>
<span id="cb153-2"><a href="基本介绍.html#cb153-2" tabindex="-1"></a><span class="fu">str_squish</span>(trim_vector) <span class="co"># 字符串中间仅保留一个空格</span></span></code></pre></div>
<pre><code>## [1] &quot;the&quot;  &quot;good&quot; &quot;b ad&quot;</code></pre>
<div class="sourceCode" id="cb155"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb155-1"><a href="基本介绍.html#cb155-1" tabindex="-1"></a><span class="fu">str_squish</span>(trim_string)</span></code></pre></div>
<pre><code>## [1] &quot;Marry has a little lamb.&quot;</code></pre>
</div>
<div id="常用函数" class="section level2 hasAnchor" number="1.10">
<h2><span class="header-section-number">1.10</span> 常用函数<a href="基本介绍.html#常用函数" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="seq函数" class="section level3 hasAnchor" number="1.10.1">
<h3><span class="header-section-number">1.10.1</span> seq()函数<a href="基本介绍.html#seq函数" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><code>seq()</code>函数用于生成一组数字序列，<code>seq</code>代表<code>sequence</code>。参数包括：</p>
<li>
<code>from</code>数字序列起点，默认为1。
</li>
<li>
<code>to</code>数字序列终点。
</li>
<li>
<code>by</code>步长，可以为正数、负数或者小数。
</li>
<li>
<code>length.out</code>生成数字序列的长度。
</li>
<li>
<code>along.with</code>生成与目标序列相同长度的数字序列。
</li>
<div class="sourceCode" id="cb157"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb157-1"><a href="基本介绍.html#cb157-1" tabindex="-1"></a><span class="co"># 从0开始，在[0,6]范围内生成以3为步长的数字序列</span></span>
<span id="cb157-2"><a href="基本介绍.html#cb157-2" tabindex="-1"></a><span class="fu">seq</span>(<span class="at">from=</span><span class="dv">0</span>, <span class="at">to=</span><span class="dv">6</span>, <span class="at">by=</span><span class="dv">3</span>) </span></code></pre></div>
<pre><code>## [1] 0 3 6</code></pre>
<div class="sourceCode" id="cb159"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb159-1"><a href="基本介绍.html#cb159-1" tabindex="-1"></a><span class="co"># 超出范围的数字将不会被纳入到数字序列中</span></span>
<span id="cb159-2"><a href="基本介绍.html#cb159-2" tabindex="-1"></a><span class="fu">seq</span>(<span class="at">from=</span><span class="dv">1</span>, <span class="at">to=</span><span class="dv">6</span>, <span class="at">by=</span><span class="dv">3</span>) </span></code></pre></div>
<pre><code>## [1] 1 4</code></pre>
<div class="sourceCode" id="cb161"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb161-1"><a href="基本介绍.html#cb161-1" tabindex="-1"></a><span class="co"># 从0开始，以3为步长，生成一个包含4个元素的数字序列</span></span>
<span id="cb161-2"><a href="基本介绍.html#cb161-2" tabindex="-1"></a><span class="fu">seq</span>(<span class="at">from=</span><span class="dv">0</span>, <span class="at">by=</span><span class="dv">3</span>, <span class="at">length.out=</span><span class="dv">4</span>) </span></code></pre></div>
<pre><code>## [1] 0 3 6 9</code></pre>
<div class="sourceCode" id="cb163"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb163-1"><a href="基本介绍.html#cb163-1" tabindex="-1"></a><span class="co"># 从1开始，以2为步长，生成一个与month.abb相同长度的数字序列</span></span>
<span id="cb163-2"><a href="基本介绍.html#cb163-2" tabindex="-1"></a><span class="fu">seq</span>(<span class="at">from=</span><span class="dv">1</span>, <span class="at">by=</span><span class="dv">2</span>, <span class="at">along.with=</span>month.abb) </span></code></pre></div>
<pre><code>##  [1]  1  3  5  7  9 11 13 15 17 19 21 23</code></pre>
</div>
<div id="rep函数" class="section level3 hasAnchor" number="1.10.2">
<h3><span class="header-section-number">1.10.2</span> rep()函数<a href="基本介绍.html#rep函数" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><code>rep()</code>函数用于生成重复序列，<code>rep</code>代表<code>repeat</code>。参数包括：</p>
<li>
<code>x</code>想要进行复制的对象，可以是一个数字，字符或者向量。
</li>
<li>
<code>times</code>对整个目标对象复制的次数，只能为正整数。
</li>
<li>
<code>each</code>对目标对象内元素复制的次数，只能为正整数。
</li>
<li>
<code>length.out</code>生成序列的长度。
</li>
<div class="sourceCode" id="cb165"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb165-1"><a href="基本介绍.html#cb165-1" tabindex="-1"></a><span class="co"># 对向量c(1,2,3)复制2次</span></span>
<span id="cb165-2"><a href="基本介绍.html#cb165-2" tabindex="-1"></a><span class="fu">rep</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="at">times=</span><span class="dv">3</span>)</span></code></pre></div>
<pre><code>## [1] 1 2 3 1 2 3 1 2 3</code></pre>
<div class="sourceCode" id="cb167"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb167-1"><a href="基本介绍.html#cb167-1" tabindex="-1"></a><span class="co"># 对向量c(1,2,3)内的元素分别复制3、2、1次</span></span>
<span id="cb167-2"><a href="基本介绍.html#cb167-2" tabindex="-1"></a><span class="fu">rep</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="at">times=</span><span class="fu">c</span>(<span class="dv">3</span>,<span class="dv">2</span>,<span class="dv">1</span>)) </span></code></pre></div>
<pre><code>## [1] 1 1 1 2 2 3</code></pre>
<div class="sourceCode" id="cb169"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb169-1"><a href="基本介绍.html#cb169-1" tabindex="-1"></a><span class="co"># 对向量c(1,2,3)内的元素各复制2次</span></span>
<span id="cb169-2"><a href="基本介绍.html#cb169-2" tabindex="-1"></a><span class="fu">rep</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="at">each=</span><span class="dv">2</span>) </span></code></pre></div>
<pre><code>## [1] 1 1 2 2 3 3</code></pre>
<div class="sourceCode" id="cb171"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb171-1"><a href="基本介绍.html#cb171-1" tabindex="-1"></a><span class="co"># 超过的长度自动截断</span></span>
<span id="cb171-2"><a href="基本介绍.html#cb171-2" tabindex="-1"></a><span class="fu">rep</span>(<span class="fu">c</span>(<span class="st">&quot;abc&quot;</span>, <span class="st">&quot;bbb&quot;</span>), <span class="at">time=</span><span class="dv">3</span>, <span class="at">length.out=</span><span class="dv">3</span>) </span></code></pre></div>
<pre><code>## [1] &quot;abc&quot; &quot;bbb&quot; &quot;abc&quot;</code></pre>
<div class="sourceCode" id="cb173"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb173-1"><a href="基本介绍.html#cb173-1" tabindex="-1"></a><span class="co"># 不足的长度自动填补</span></span>
<span id="cb173-2"><a href="基本介绍.html#cb173-2" tabindex="-1"></a><span class="fu">rep</span>(<span class="fu">c</span>(<span class="st">&quot;abc&quot;</span>, <span class="st">&quot;bbb&quot;</span>), <span class="at">time=</span><span class="dv">3</span>, <span class="at">length.out=</span><span class="dv">9</span>) </span></code></pre></div>
<pre><code>## [1] &quot;abc&quot; &quot;bbb&quot; &quot;abc&quot; &quot;bbb&quot; &quot;abc&quot; &quot;bbb&quot; &quot;abc&quot; &quot;bbb&quot; &quot;abc&quot;</code></pre>
</div>
<div id="unique函数" class="section level3 hasAnchor" number="1.10.3">
<h3><span class="header-section-number">1.10.3</span> unique()函数<a href="基本介绍.html#unique函数" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><code>unique()</code>函数用于移除重复值。</p>
<div class="sourceCode" id="cb175"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb175-1"><a href="基本介绍.html#cb175-1" tabindex="-1"></a><span class="fu">unique</span>(<span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">3</span>,<span class="dv">2</span>))</span></code></pre></div>
<pre><code>## [1] 1 2 3 4</code></pre>
</div>
<div id="quantile函数" class="section level3 hasAnchor" number="1.10.4">
<h3><span class="header-section-number">1.10.4</span> quantile()函数<a href="基本介绍.html#quantile函数" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><code>quantile()</code>函数用于获取分位数。</p>
<div class="sourceCode" id="cb177"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb177-1"><a href="基本介绍.html#cb177-1" tabindex="-1"></a><span class="co"># 获取上下四分位数以及中位数</span></span>
<span id="cb177-2"><a href="基本介绍.html#cb177-2" tabindex="-1"></a><span class="fu">quantile</span>(<span class="fu">seq</span>(<span class="dv">0</span>,<span class="dv">1</span>,<span class="fl">0.05</span>), <span class="at">probs=</span><span class="fu">c</span>(<span class="fl">0.25</span>,<span class="fl">0.5</span>,<span class="fl">0.75</span>))</span></code></pre></div>
<pre><code>##  25%  50%  75% 
## 0.25 0.50 0.75</code></pre>
</div>
<div id="floorceilinground函数" class="section level3 hasAnchor" number="1.10.5">
<h3><span class="header-section-number">1.10.5</span> floor()、ceiling()、round()函数<a href="基本介绍.html#floorceilinground函数" class="anchor-section" aria-label="Anchor link to header"></a></h3>
有时我们需要对小数进行处理。
<li>
<code>floor()</code>函数返回不大于当前数字的最大整数，实际操作为提取数字的整数部分。
</li>
<li>
<code>ceiling()</code>函数返回不小于于当前数字的最小整数，实际操作为提取数字的整数部分<u>再加1</u>。
</li>
<li>
<code>round()</code>函数用于四舍五入至特定小数位。
</li>
<div class="sourceCode" id="cb179"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb179-1"><a href="基本介绍.html#cb179-1" tabindex="-1"></a>num_demo <span class="ot">&lt;-</span> <span class="fl">3.1415926</span></span>
<span id="cb179-2"><a href="基本介绍.html#cb179-2" tabindex="-1"></a><span class="fu">floor</span>(num_demo)</span></code></pre></div>
<pre><code>## [1] 3</code></pre>
<div class="sourceCode" id="cb181"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb181-1"><a href="基本介绍.html#cb181-1" tabindex="-1"></a><span class="fu">ceiling</span>(num_demo)</span></code></pre></div>
<pre><code>## [1] 4</code></pre>
<div class="sourceCode" id="cb183"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb183-1"><a href="基本介绍.html#cb183-1" tabindex="-1"></a><span class="fu">round</span>(num_demo, <span class="dv">3</span>)</span></code></pre></div>
<pre><code>## [1] 3.142</code></pre>
</div>
<div id="sample函数" class="section level3 hasAnchor" number="1.10.6">
<h3><span class="header-section-number">1.10.6</span> sample()函数<a href="基本介绍.html#sample函数" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><code>sample()</code>函数用于随机抽样。参数包括：</p>
<li>
<code>x</code>想要进行抽样的向量。
</li>
<li>
<code>size</code>想要进行抽样的向量。
</li>
<li>
<code>replace</code>默认为<code>FALSE</code>，即不重复抽样，此时<code>size</code><font color="red">不能大于</font><code>x</code>。若为<code>TRUE</code>，则为重复抽样，此时<code>size</code>可以大于<code>x</code>。
</li>
<li>
<code>prob</code>向量中各元素被抽到的概率，默认为<code>NULL</code>，即概率相同。
</li>
<p><strong><em>注意</em></strong>：在进行随机抽样前，使用 <code>set.seed()</code> 函数设置<a href="https://www.rdocumentation.org/packages/base/versions/3.6.2/topics/Random">随机种子</a>可以保证抽样结果的复现。随机种子的赋值只需初始化一次。</p>
<div class="sourceCode" id="cb185"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb185-1"><a href="基本介绍.html#cb185-1" tabindex="-1"></a><span class="co"># set.seed(1)</span></span>
<span id="cb185-2"><a href="基本介绍.html#cb185-2" tabindex="-1"></a><span class="fu">sample</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>, <span class="at">size=</span><span class="dv">10</span>, <span class="at">replace=</span><span class="cn">TRUE</span>) <span class="co"># 从[1,6]中重复地随机抽取10个元素</span></span></code></pre></div>
<pre><code>##  [1] 1 1 6 5 5 2 2 6 1 4</code></pre>
</div>
<div id="combn函数" class="section level3 hasAnchor" number="1.10.7">
<h3><span class="header-section-number">1.10.7</span> combn()函数<a href="基本介绍.html#combn函数" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><code>combn()</code>函数用于获得目标向量中指定长度的所有组合，常用于需要遍历变量组合的情况。参数包括：</p>
<li>
<code>x</code>目标向量。
</li>
<li>
<code>m</code>指定组合长度。
</li>
<li>
<code>simplify</code>默认为<code>TRUE</code>，即返回矩阵。若为<code>FALSE</code>，则返回列表。
</li>
<div class="sourceCode" id="cb187"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb187-1"><a href="基本介绍.html#cb187-1" tabindex="-1"></a><span class="co"># 创建向量</span></span>
<span id="cb187-2"><a href="基本介绍.html#cb187-2" tabindex="-1"></a>var_list <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;bmi&quot;</span>, <span class="st">&quot;age&quot;</span>, <span class="st">&quot;sex&quot;</span>, <span class="st">&quot;education&quot;</span>) </span>
<span id="cb187-3"><a href="基本介绍.html#cb187-3" tabindex="-1"></a></span>
<span id="cb187-4"><a href="基本介绍.html#cb187-4" tabindex="-1"></a><span class="co"># 将var_list内的三个元素随机组合，返回为矩阵</span></span>
<span id="cb187-5"><a href="基本介绍.html#cb187-5" tabindex="-1"></a><span class="fu">combn</span>(var_list, <span class="dv">3</span>) </span></code></pre></div>
<pre><code>##      [,1]  [,2]        [,3]        [,4]       
## [1,] &quot;bmi&quot; &quot;bmi&quot;       &quot;bmi&quot;       &quot;age&quot;      
## [2,] &quot;age&quot; &quot;age&quot;       &quot;sex&quot;       &quot;sex&quot;      
## [3,] &quot;sex&quot; &quot;education&quot; &quot;education&quot; &quot;education&quot;</code></pre>
<div class="sourceCode" id="cb189"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb189-1"><a href="基本介绍.html#cb189-1" tabindex="-1"></a><span class="co"># 获取返回矩阵的第一个组合</span></span>
<span id="cb189-2"><a href="基本介绍.html#cb189-2" tabindex="-1"></a><span class="fu">combn</span>(var_list, <span class="dv">3</span>)[,<span class="dv">1</span>] </span></code></pre></div>
<pre><code>## [1] &quot;bmi&quot; &quot;age&quot; &quot;sex&quot;</code></pre>
<div class="sourceCode" id="cb191"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb191-1"><a href="基本介绍.html#cb191-1" tabindex="-1"></a><span class="co"># 将变量var_list内的三个元素随机组合，返回为列表</span></span>
<span id="cb191-2"><a href="基本介绍.html#cb191-2" tabindex="-1"></a><span class="fu">combn</span>(var_list, <span class="dv">3</span>, <span class="at">simplify=</span><span class="cn">FALSE</span>) </span></code></pre></div>
<pre><code>## [[1]]
## [1] &quot;bmi&quot; &quot;age&quot; &quot;sex&quot;
## 
## [[2]]
## [1] &quot;bmi&quot;       &quot;age&quot;       &quot;education&quot;
## 
## [[3]]
## [1] &quot;bmi&quot;       &quot;sex&quot;       &quot;education&quot;
## 
## [[4]]
## [1] &quot;age&quot;       &quot;sex&quot;       &quot;education&quot;</code></pre>
<div class="sourceCode" id="cb193"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb193-1"><a href="基本介绍.html#cb193-1" tabindex="-1"></a><span class="co"># 获取返回列表的第一个组合</span></span>
<span id="cb193-2"><a href="基本介绍.html#cb193-2" tabindex="-1"></a><span class="fu">combn</span>(var_list, <span class="dv">3</span>, <span class="at">simplify=</span><span class="cn">FALSE</span>)[[<span class="dv">1</span>]] </span></code></pre></div>
<pre><code>## [1] &quot;bmi&quot; &quot;age&quot; &quot;sex&quot;</code></pre>
</div>
<div id="paste函数" class="section level3 hasAnchor" number="1.10.8">
<h3><span class="header-section-number">1.10.8</span> paste()函数<a href="基本介绍.html#paste函数" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><code>paste()</code>函数用于将向量、数字或字符合并成<u>字符串</u>，常用于特定语句的生成。</p>
<li>
<code>sep</code>参数用于定义将不同向量或字符合并成字符串所用的连接符。
</li>
<li>
<code>collapse</code>参数用于定义将单一向量内元素合并成字符串所用的连接符。
</li>
<div class="sourceCode" id="cb195"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb195-1"><a href="基本介绍.html#cb195-1" tabindex="-1"></a><span class="co"># 将不同向量或字符合并成字符串</span></span>
<span id="cb195-2"><a href="基本介绍.html#cb195-2" tabindex="-1"></a><span class="fu">paste</span>(<span class="st">&quot;are&quot;</span>, <span class="st">&quot;you&quot;</span>, <span class="st">&quot;OK&quot;</span>, <span class="at">sep=</span><span class="st">&quot; &quot;</span>) <span class="co"># 返回一个字符串</span></span></code></pre></div>
<pre><code>## [1] &quot;are you OK&quot;</code></pre>
<div class="sourceCode" id="cb197"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb197-1"><a href="基本介绍.html#cb197-1" tabindex="-1"></a><span class="fu">paste0</span>(<span class="st">&quot;are&quot;</span>, <span class="st">&quot;you&quot;</span>, <span class="st">&quot;OK&quot;</span>) <span class="co"># paste0()与paste(sep=&quot;&quot;)一样</span></span></code></pre></div>
<pre><code>## [1] &quot;areyouOK&quot;</code></pre>
<div class="sourceCode" id="cb199"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb199-1"><a href="基本介绍.html#cb199-1" tabindex="-1"></a><span class="fu">paste</span>(var_list, <span class="st">&quot;cn&quot;</span>, <span class="at">sep=</span><span class="st">&quot;-&quot;</span>) <span class="co"># 返回包含字符串的向量</span></span></code></pre></div>
<pre><code>## [1] &quot;bmi-cn&quot;       &quot;age-cn&quot;       &quot;sex-cn&quot;       &quot;education-cn&quot;</code></pre>
<div class="sourceCode" id="cb201"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb201-1"><a href="基本介绍.html#cb201-1" tabindex="-1"></a><span class="co"># 将单一向量内元素合并成字符串</span></span>
<span id="cb201-2"><a href="基本介绍.html#cb201-2" tabindex="-1"></a><span class="fu">paste</span>(var_list, <span class="at">collapse=</span><span class="st">&quot;+&quot;</span>) <span class="co"># 返回一个字符串</span></span></code></pre></div>
<pre><code>## [1] &quot;bmi+age+sex+education&quot;</code></pre>
</div>
<div id="chapter1-label-ifelse" class="section level3 hasAnchor" number="1.10.9">
<h3><span class="header-section-number">1.10.9</span> ifelse()函数<a href="基本介绍.html#chapter1-label-ifelse" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><code>ifelse()</code>函数为条件函数，包含三个参数：</p>
<li>
<code>test</code>条件。
</li>
<li>
<code>yes</code>条件为TRUE时的返回值。
</li>
<li>
<code>no</code>条件为FALSE时的返回值。
</li>
<p>此函数在条件判断中可以得到多个逻辑结果，返回对应数目的逻辑值并根据逻辑值赋值（注意与<code>if(){}else{}</code>函数<a href="基本介绍.html#chapter1-label-if-else">1.10.10</a>的区别）。此函数可以嵌套。</p>
<div class="sourceCode" id="cb203"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb203-1"><a href="基本介绍.html#cb203-1" tabindex="-1"></a><span class="co"># 创建向量</span></span>
<span id="cb203-2"><a href="基本介绍.html#cb203-2" tabindex="-1"></a>age <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="dv">1</span>,<span class="dv">4</span>)</span>
<span id="cb203-3"><a href="基本介绍.html#cb203-3" tabindex="-1"></a>target <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">2</span>,<span class="dv">4</span>,<span class="dv">4</span>)</span>
<span id="cb203-4"><a href="基本介绍.html#cb203-4" tabindex="-1"></a></span>
<span id="cb203-5"><a href="基本介绍.html#cb203-5" tabindex="-1"></a><span class="co"># ifelse可进行多个逻辑判断并分别返回值</span></span>
<span id="cb203-6"><a href="基本介绍.html#cb203-6" tabindex="-1"></a><span class="fu">ifelse</span>(age<span class="sc">==</span>target, <span class="st">&quot;Y&quot;</span>, <span class="st">&quot;N&quot;</span>) </span></code></pre></div>
<pre><code>## [1] &quot;N&quot; &quot;Y&quot; &quot;N&quot; &quot;Y&quot;</code></pre>
<div class="sourceCode" id="cb205"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb205-1"><a href="基本介绍.html#cb205-1" tabindex="-1"></a><span class="fu">ifelse</span>(age<span class="sc">==</span><span class="dv">1</span>, <span class="st">&quot;age1&quot;</span>, <span class="fu">ifelse</span>(age<span class="sc">&lt;</span><span class="dv">4</span>, <span class="st">&quot;age2&quot;</span>, <span class="st">&quot;age3&quot;</span>))</span></code></pre></div>
<pre><code>## [1] &quot;age1&quot; &quot;age2&quot; &quot;age2&quot; &quot;age3&quot;</code></pre>
</div>
<div id="chapter1-label-if-else" class="section level3 hasAnchor" number="1.10.10">
<h3><span class="header-section-number">1.10.10</span> if(){}else{}函数<a href="基本介绍.html#chapter1-label-if-else" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><code>()</code>内为判断条件，如果为真，则运行第一个<code>{}</code>的指令，否则运行第二个<code>{}</code>的指令。此判断条件中只接受<u>一个</u>逻辑结果。如果输入多个逻辑结果，将会报错，此时需要用<code>any()</code>或者<code>all()</code>函数对多个逻辑结果进行处理。使用多个<code>else if(){}</code>进行嵌套。</p>
<p>注意与<code>ifelse()</code>函数<a href="基本介绍.html#chapter1-label-ifelse">1.10.9</a>的区别。</p>
<div class="sourceCode" id="cb207"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb207-1"><a href="基本介绍.html#cb207-1" tabindex="-1"></a><span class="co"># if(){}else{}只接受一个逻辑值</span></span>
<span id="cb207-2"><a href="基本介绍.html#cb207-2" tabindex="-1"></a><span class="cf">if</span>(<span class="fu">any</span>(age<span class="sc">==</span><span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">1</span>))){<span class="st">&quot;Y&quot;</span>} <span class="cf">else</span>{<span class="st">&quot;N&quot;</span>}</span></code></pre></div>
<pre><code>## [1] &quot;Y&quot;</code></pre>
<div class="sourceCode" id="cb209"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb209-1"><a href="基本介绍.html#cb209-1" tabindex="-1"></a><span class="co"># 创建向量</span></span>
<span id="cb209-2"><a href="基本介绍.html#cb209-2" tabindex="-1"></a>new_age <span class="ot">&lt;-</span> <span class="dv">55</span></span>
<span id="cb209-3"><a href="基本介绍.html#cb209-3" tabindex="-1"></a></span>
<span id="cb209-4"><a href="基本介绍.html#cb209-4" tabindex="-1"></a><span class="cf">if</span>(new_age<span class="sc">&lt;</span><span class="dv">40</span>){</span>
<span id="cb209-5"><a href="基本介绍.html#cb209-5" tabindex="-1"></a>  <span class="st">&quot;青年&quot;</span></span>
<span id="cb209-6"><a href="基本介绍.html#cb209-6" tabindex="-1"></a>} <span class="cf">else</span> <span class="cf">if</span>(new_age<span class="sc">&lt;</span><span class="dv">60</span>){</span>
<span id="cb209-7"><a href="基本介绍.html#cb209-7" tabindex="-1"></a>  <span class="st">&quot;中年&quot;</span></span>
<span id="cb209-8"><a href="基本介绍.html#cb209-8" tabindex="-1"></a>} <span class="cf">else</span> {<span class="st">&quot;老年&quot;</span>}</span></code></pre></div>
<pre><code>## [1] &quot;中年&quot;</code></pre>
</div>
<div id="循环" class="section level3 hasAnchor" number="1.10.11">
<h3><span class="header-section-number">1.10.11</span> 循环<a href="基本介绍.html#循环" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="for循环" class="section level4 hasAnchor" number="1.10.11.1">
<h4><span class="header-section-number">1.10.11.1</span> for循环<a href="基本介绍.html#for循环" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>for循环是R语言中最常用的迭代函数之一，形式为<code>for(){}</code>：</p>
<li>
<code>()</code>内为迭代器，即需要迭代的向量。
</li>
<li>
<code>{}</code>内为想要运行的指令。
</li>
<div class="sourceCode" id="cb211"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb211-1"><a href="基本介绍.html#cb211-1" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="fu">seq</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>)){</span>
<span id="cb211-2"><a href="基本介绍.html#cb211-2" tabindex="-1"></a>  <span class="fu">print</span>(<span class="fu">paste0</span>(<span class="st">&quot;现在的数字是：&quot;</span>, i)) <span class="co"># 循环打印</span></span>
<span id="cb211-3"><a href="基本介绍.html#cb211-3" tabindex="-1"></a>}</span></code></pre></div>
<pre><code>## [1] &quot;现在的数字是：1&quot;
## [1] &quot;现在的数字是：2&quot;
## [1] &quot;现在的数字是：3&quot;
## [1] &quot;现在的数字是：4&quot;</code></pre>
<div class="sourceCode" id="cb213"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb213-1"><a href="基本介绍.html#cb213-1" tabindex="-1"></a>ini_num <span class="ot">&lt;-</span> <span class="dv">5</span> <span class="co"># 设定初始值</span></span>
<span id="cb213-2"><a href="基本介绍.html#cb213-2" tabindex="-1"></a>sum_container <span class="ot">&lt;-</span> <span class="fu">c</span>() <span class="co"># 创建空向量</span></span>
<span id="cb213-3"><a href="基本介绍.html#cb213-3" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="fu">seq</span>(<span class="dv">1</span>,<span class="dv">5</span>,<span class="at">by=</span><span class="dv">2</span>)){</span>
<span id="cb213-4"><a href="基本介绍.html#cb213-4" tabindex="-1"></a>  ini_num <span class="ot">=</span> ini_num <span class="sc">+</span> i <span class="co"># 迭代求和</span></span>
<span id="cb213-5"><a href="基本介绍.html#cb213-5" tabindex="-1"></a>  sum_container <span class="ot">&lt;-</span> <span class="fu">append</span>(sum_container, ini_num) <span class="co"># 将求和值添加入向量</span></span>
<span id="cb213-6"><a href="基本介绍.html#cb213-6" tabindex="-1"></a>}</span>
<span id="cb213-7"><a href="基本介绍.html#cb213-7" tabindex="-1"></a>sum_container</span></code></pre></div>
<pre><code>## [1]  6  9 14</code></pre>
</div>
<div id="while循环" class="section level4 hasAnchor" number="1.10.11.2">
<h4><span class="header-section-number">1.10.11.2</span> while循环<a href="基本介绍.html#while循环" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p><code>while(){}</code>循环将重复执行<code>{}</code>中的指令直至<font color="red">不能满足</font><code>()</code>中的条件。</p>
<div class="sourceCode" id="cb215"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb215-1"><a href="基本介绍.html#cb215-1" tabindex="-1"></a>init_num <span class="ot">&lt;-</span> <span class="dv">0</span> <span class="co"># 设定初始值</span></span>
<span id="cb215-2"><a href="基本介绍.html#cb215-2" tabindex="-1"></a><span class="cf">while</span>(init_num<span class="sc">&lt;</span><span class="dv">4</span>){</span>
<span id="cb215-3"><a href="基本介绍.html#cb215-3" tabindex="-1"></a>  init_num <span class="ot">=</span> init_num <span class="sc">+</span> <span class="dv">1</span> <span class="co"># 每次计数+1</span></span>
<span id="cb215-4"><a href="基本介绍.html#cb215-4" tabindex="-1"></a>  <span class="fu">print</span>(<span class="fu">paste0</span>(<span class="st">&quot;已完成&quot;</span>, init_num, <span class="st">&quot;次运算。&quot;</span>))</span>
<span id="cb215-5"><a href="基本介绍.html#cb215-5" tabindex="-1"></a>}</span></code></pre></div>
<pre><code>## [1] &quot;已完成1次运算。&quot;
## [1] &quot;已完成2次运算。&quot;
## [1] &quot;已完成3次运算。&quot;
## [1] &quot;已完成4次运算。&quot;</code></pre>
</div>
<div id="apply函数" class="section level4 hasAnchor" number="1.10.11.3">
<h4><span class="header-section-number">1.10.11.3</span> apply()函数<a href="基本介绍.html#apply函数" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>当需要对矩阵或者数据框进行统一的特定处理时，为避免重复使用循环，可以选择<code>apply()</code>函数，返回类型为向量或矩阵。此函数中三个主要的参数为：</p>
<li>
<code>X</code>输入数据。
</li>
<li>
<code>MARGIN</code>指令执行方向。
</li>
<li>
<code>FUN</code>执行指令。
</li>
<table>
<colgroup>
<col width="33%" />
<col width="33%" />
<col width="33%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">FUN</th>
<th align="left">MARGIN</th>
<th align="left">指令执行说明</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">当指令需要作用于多个元素</td>
<td align="left">MARGIN=1</td>
<td align="left">逐行运行指令，返回向量</td>
</tr>
<tr class="even">
<td align="left">当指令需要作用于多个元素</td>
<td align="left">MARGIN=2</td>
<td align="left">逐列运行指令，返回向量</td>
</tr>
<tr class="odd">
<td align="left">当指令只作用于单个元素</td>
<td align="left">MARGIN=1</td>
<td align="left">逐个运行指令，返回矩阵。可以理解为将数据转置后对单个元素进行处理。</td>
</tr>
<tr class="even">
<td align="left">当指令只作用于单个元素</td>
<td align="left">MARGIN=2</td>
<td align="left">逐个运行指令，返回矩阵。可以理解为在原有数据上直接对单个元素进行处理。</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb217"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb217-1"><a href="基本介绍.html#cb217-1" tabindex="-1"></a><span class="co"># apply()函数与矩阵</span></span>
<span id="cb217-2"><a href="基本介绍.html#cb217-2" tabindex="-1"></a>var_matrix <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">4</span>,<span class="dv">9</span>,<span class="dv">16</span>,<span class="dv">25</span>,<span class="dv">36</span>),<span class="at">nrow=</span><span class="dv">2</span>)</span>
<span id="cb217-3"><a href="基本介绍.html#cb217-3" tabindex="-1"></a></span>
<span id="cb217-4"><a href="基本介绍.html#cb217-4" tabindex="-1"></a><span class="co"># 指令作用于多个元素</span></span>
<span id="cb217-5"><a href="基本介绍.html#cb217-5" tabindex="-1"></a><span class="fu">apply</span>(var_matrix, <span class="dv">1</span>, sum) </span></code></pre></div>
<pre><code>## [1] 35 56</code></pre>
<div class="sourceCode" id="cb219"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb219-1"><a href="基本介绍.html#cb219-1" tabindex="-1"></a><span class="co"># 指令作用于多个元素</span></span>
<span id="cb219-2"><a href="基本介绍.html#cb219-2" tabindex="-1"></a><span class="fu">apply</span>(var_matrix, <span class="dv">2</span>, sum) </span></code></pre></div>
<pre><code>## [1]  5 25 61</code></pre>
<div class="sourceCode" id="cb221"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb221-1"><a href="基本介绍.html#cb221-1" tabindex="-1"></a><span class="co"># 指令作用于单个元素</span></span>
<span id="cb221-2"><a href="基本介绍.html#cb221-2" tabindex="-1"></a><span class="fu">apply</span>(var_matrix, <span class="dv">1</span>, sqrt) </span></code></pre></div>
<pre><code>##      [,1] [,2]
## [1,]    1    2
## [2,]    3    4
## [3,]    5    6</code></pre>
<div class="sourceCode" id="cb223"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb223-1"><a href="基本介绍.html#cb223-1" tabindex="-1"></a><span class="co"># 指令作用于单个元素</span></span>
<span id="cb223-2"><a href="基本介绍.html#cb223-2" tabindex="-1"></a><span class="fu">apply</span>(var_matrix, <span class="dv">2</span>, sqrt) </span></code></pre></div>
<pre><code>##      [,1] [,2] [,3]
## [1,]    1    3    5
## [2,]    2    4    6</code></pre>
<div class="sourceCode" id="cb225"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb225-1"><a href="基本介绍.html#cb225-1" tabindex="-1"></a><span class="co"># apply()函数与数据框</span></span>
<span id="cb225-2"><a href="基本介绍.html#cb225-2" tabindex="-1"></a><span class="co"># 读取数据</span></span>
<span id="cb225-3"><a href="基本介绍.html#cb225-3" tabindex="-1"></a><span class="fu">data</span>(iris)</span>
<span id="cb225-4"><a href="基本介绍.html#cb225-4" tabindex="-1"></a></span>
<span id="cb225-5"><a href="基本介绍.html#cb225-5" tabindex="-1"></a><span class="co"># 对iris数据库中的第1、3列分别求和</span></span>
<span id="cb225-6"><a href="基本介绍.html#cb225-6" tabindex="-1"></a><span class="fu">apply</span>(iris[,<span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">3</span>)], <span class="dv">2</span>, sum) </span></code></pre></div>
<pre><code>## Sepal.Length Petal.Length 
##        876.5        563.7</code></pre>
<p>当需要对列表或数据框进行统一的特定处理时，可以使用<code>lapply()</code>函数，返回类型为列表。主要参数为<code>X</code>即输入数据和<code>FUN</code>执行指令。当<code>FUN</code>作用于<code>X</code>内的单个元素时，<code>X</code>的结构不会发生改变。</p>
<div class="sourceCode" id="cb227"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb227-1"><a href="基本介绍.html#cb227-1" tabindex="-1"></a>var_vector_list <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">4</span>,<span class="dv">9</span>), <span class="fu">c</span>(<span class="dv">16</span>,<span class="dv">25</span>,<span class="dv">36</span>))</span>
<span id="cb227-2"><a href="基本介绍.html#cb227-2" tabindex="-1"></a><span class="fu">lapply</span>(var_vector_list, sum) </span></code></pre></div>
<pre><code>## [[1]]
## [1] 14
## 
## [[2]]
## [1] 77</code></pre>
<div class="sourceCode" id="cb229"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb229-1"><a href="基本介绍.html#cb229-1" tabindex="-1"></a><span class="co"># 函数作用于单个元素时，元素结构不会发生改变</span></span>
<span id="cb229-2"><a href="基本介绍.html#cb229-2" tabindex="-1"></a><span class="fu">lapply</span>(var_vector_list, sqrt) </span></code></pre></div>
<pre><code>## [[1]]
## [1] 1 2 3
## 
## [[2]]
## [1] 4 5 6</code></pre>
<div class="sourceCode" id="cb231"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb231-1"><a href="基本介绍.html#cb231-1" tabindex="-1"></a>var_matrix_list <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="fu">matrix</span>(<span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">4</span>,<span class="dv">9</span>,<span class="dv">16</span>,<span class="dv">25</span>,<span class="dv">36</span>),<span class="at">nrow=</span><span class="dv">2</span>),<span class="fu">matrix</span>(<span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">4</span>,<span class="dv">9</span>,<span class="dv">16</span>,<span class="dv">25</span>,<span class="dv">36</span>),<span class="at">nrow=</span><span class="dv">2</span>))</span>
<span id="cb231-2"><a href="基本介绍.html#cb231-2" tabindex="-1"></a><span class="fu">lapply</span>(var_matrix_list, sum) </span></code></pre></div>
<pre><code>## [[1]]
## [1] 91
## 
## [[2]]
## [1] 91</code></pre>
<div class="sourceCode" id="cb233"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb233-1"><a href="基本介绍.html#cb233-1" tabindex="-1"></a><span class="co"># 函数作用于单个元素时，元素结构不会发生改变</span></span>
<span id="cb233-2"><a href="基本介绍.html#cb233-2" tabindex="-1"></a><span class="fu">lapply</span>(var_matrix_list, sqrt) </span></code></pre></div>
<pre><code>## [[1]]
##      [,1] [,2] [,3]
## [1,]    1    3    5
## [2,]    2    4    6
## 
## [[2]]
##      [,1] [,2] [,3]
## [1,]    1    3    5
## [2,]    2    4    6</code></pre>
<p>当需要对列表、向量或数据框进行统一的特定处理且希望返回最简单的数据结构时，可以使用<code>sapply()</code>函数。</p>
<div class="sourceCode" id="cb235"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb235-1"><a href="基本介绍.html#cb235-1" tabindex="-1"></a>var_matrix <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">4</span>,<span class="dv">9</span>,<span class="dv">16</span>,<span class="dv">25</span>,<span class="dv">36</span>),<span class="at">nrow=</span><span class="dv">2</span>)</span>
<span id="cb235-2"><a href="基本介绍.html#cb235-2" tabindex="-1"></a><span class="fu">sapply</span>(var_matrix, sum) <span class="co"># 返回向量</span></span></code></pre></div>
<pre><code>## [1]  1  4  9 16 25 36</code></pre>
<div class="sourceCode" id="cb237"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb237-1"><a href="基本介绍.html#cb237-1" tabindex="-1"></a><span class="fu">sapply</span>(var_matrix, sqrt) <span class="co"># 返回向量</span></span></code></pre></div>
<pre><code>## [1] 1 2 3 4 5 6</code></pre>
<div class="sourceCode" id="cb239"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb239-1"><a href="基本介绍.html#cb239-1" tabindex="-1"></a>var_vector_list <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">4</span>,<span class="dv">9</span>), <span class="fu">c</span>(<span class="dv">16</span>,<span class="dv">25</span>,<span class="dv">36</span>))</span>
<span id="cb239-2"><a href="基本介绍.html#cb239-2" tabindex="-1"></a><span class="fu">sapply</span>(var_vector_list, sum) <span class="co"># 返回向量</span></span></code></pre></div>
<pre><code>## [1] 14 77</code></pre>
<div class="sourceCode" id="cb241"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb241-1"><a href="基本介绍.html#cb241-1" tabindex="-1"></a><span class="fu">sapply</span>(var_vector_list, sqrt) <span class="co"># 返回矩阵</span></span></code></pre></div>
<pre><code>##      [,1] [,2]
## [1,]    1    4
## [2,]    2    5
## [3,]    3    6</code></pre>
<div class="sourceCode" id="cb243"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb243-1"><a href="基本介绍.html#cb243-1" tabindex="-1"></a>var_matrix_list <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="fu">matrix</span>(<span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">4</span>,<span class="dv">9</span>,<span class="dv">16</span>,<span class="dv">25</span>,<span class="dv">36</span>),<span class="at">nrow=</span><span class="dv">2</span>),<span class="fu">matrix</span>(<span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">4</span>,<span class="dv">9</span>,<span class="dv">16</span>,<span class="dv">25</span>,<span class="dv">36</span>),<span class="at">nrow=</span><span class="dv">2</span>))</span>
<span id="cb243-2"><a href="基本介绍.html#cb243-2" tabindex="-1"></a><span class="fu">sapply</span>(var_vector_list, sum) <span class="co"># 返回向量</span></span></code></pre></div>
<pre><code>## [1] 14 77</code></pre>
<div class="sourceCode" id="cb245"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb245-1"><a href="基本介绍.html#cb245-1" tabindex="-1"></a><span class="fu">sapply</span>(var_matrix_list, sqrt) <span class="co"># 返回矩阵</span></span></code></pre></div>
<pre><code>##      [,1] [,2]
## [1,]    1    1
## [2,]    2    2
## [3,]    3    3
## [4,]    4    4
## [5,]    5    5
## [6,]    6    6</code></pre>
<p>当需要对向量<strong>按类别</strong>进行统一的特定处理时，可以使用<code>tapply()</code>函数，返回数组。</p>
<div class="sourceCode" id="cb247"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb247-1"><a href="基本介绍.html#cb247-1" tabindex="-1"></a><span class="fu">data</span>(iris)</span>
<span id="cb247-2"><a href="基本介绍.html#cb247-2" tabindex="-1"></a><span class="fu">tapply</span>(iris[,<span class="dv">1</span>], iris<span class="sc">$</span>Species, mean)</span></code></pre></div>
<pre><code>##     setosa versicolor  virginica 
##      5.006      5.936      6.588</code></pre>
<p>小结</p>
<table>
<thead>
<tr class="header">
<th align="left">函数</th>
<th align="left">主要参数</th>
<th align="left">输入数据类型</th>
<th align="left">输出数据类型</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">apply</td>
<td align="left">apply(X,MARGIN,FUN)</td>
<td align="left">矩阵、数据框</td>
<td align="left">向量、矩阵</td>
</tr>
<tr class="even">
<td align="left">lapply</td>
<td align="left">lapply(X,FUN)</td>
<td align="left">列表、数据框</td>
<td align="left">列表</td>
</tr>
<tr class="odd">
<td align="left">sapply</td>
<td align="left">sapply(X,FUN)</td>
<td align="left">列表、矩阵、数据框</td>
<td align="left">向量、矩阵</td>
</tr>
<tr class="even">
<td align="left">tapply</td>
<td align="left">tapply(X,INDEX,FUN)</td>
<td align="left">向量</td>
<td align="left">数组</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="自定义函数" class="section level3 hasAnchor" number="1.10.12">
<h3><span class="header-section-number">1.10.12</span> 自定义函数<a href="基本介绍.html#自定义函数" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><code>function(){}</code>用于自定义函数，其中<code>()</code>用于定义函数的参数，<code>{}</code>用于定义函数的指令并以<code>return()</code>定义要返回的数据。</p>
<div class="sourceCode" id="cb249"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb249-1"><a href="基本介绍.html#cb249-1" tabindex="-1"></a><span class="co"># 定义一个函数，用于报告向量长度</span></span>
<span id="cb249-2"><a href="基本介绍.html#cb249-2" tabindex="-1"></a>length_report <span class="ot">&lt;-</span> <span class="cf">function</span>(x){</span>
<span id="cb249-3"><a href="基本介绍.html#cb249-3" tabindex="-1"></a>  <span class="fu">print</span>(<span class="fu">paste0</span>(<span class="st">&quot;此向量的长度是：&quot;</span>, <span class="fu">length</span>(x)))</span>
<span id="cb249-4"><a href="基本介绍.html#cb249-4" tabindex="-1"></a>}</span>
<span id="cb249-5"><a href="基本介绍.html#cb249-5" tabindex="-1"></a></span>
<span id="cb249-6"><a href="基本介绍.html#cb249-6" tabindex="-1"></a><span class="fu">length_report</span>(<span class="fu">c</span>(<span class="st">&quot;bmi&quot;</span>, <span class="st">&quot;grip&quot;</span>, <span class="st">&quot;sex&quot;</span>, <span class="st">&quot;age&quot;</span>))</span></code></pre></div>
<pre><code>## [1] &quot;此向量的长度是：4&quot;</code></pre>
<div class="sourceCode" id="cb251"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb251-1"><a href="基本介绍.html#cb251-1" tabindex="-1"></a><span class="co"># 定义一个x+2y的函数，返回运算结果</span></span>
<span id="cb251-2"><a href="基本介绍.html#cb251-2" tabindex="-1"></a>multiply_function <span class="ot">&lt;-</span> <span class="cf">function</span>(x,y){</span>
<span id="cb251-3"><a href="基本介绍.html#cb251-3" tabindex="-1"></a>  <span class="fu">return</span>(x<span class="sc">+</span><span class="dv">2</span><span class="sc">*</span>y)</span>
<span id="cb251-4"><a href="基本介绍.html#cb251-4" tabindex="-1"></a>}</span>
<span id="cb251-5"><a href="基本介绍.html#cb251-5" tabindex="-1"></a></span>
<span id="cb251-6"><a href="基本介绍.html#cb251-6" tabindex="-1"></a>result_multiply <span class="ot">&lt;-</span> <span class="fu">multiply_function</span>(<span class="dv">2</span>,<span class="dv">3</span>) <span class="co"># 传入参数位置与函数参数位置对应</span></span>
<span id="cb251-7"><a href="基本介绍.html#cb251-7" tabindex="-1"></a>result_multiply</span></code></pre></div>
<pre><code>## [1] 8</code></pre>
<div class="sourceCode" id="cb253"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb253-1"><a href="基本介绍.html#cb253-1" tabindex="-1"></a><span class="co"># 定义默认变量</span></span>
<span id="cb253-2"><a href="基本介绍.html#cb253-2" tabindex="-1"></a>multiply_function2 <span class="ot">&lt;-</span> <span class="cf">function</span>(x,y,<span class="at">z=</span><span class="st">&quot;运算完成！&quot;</span>){</span>
<span id="cb253-3"><a href="基本介绍.html#cb253-3" tabindex="-1"></a>  <span class="fu">print</span>(z)</span>
<span id="cb253-4"><a href="基本介绍.html#cb253-4" tabindex="-1"></a>  <span class="fu">return</span>(x<span class="sc">+</span><span class="dv">2</span><span class="sc">*</span>y)</span>
<span id="cb253-5"><a href="基本介绍.html#cb253-5" tabindex="-1"></a>}</span>
<span id="cb253-6"><a href="基本介绍.html#cb253-6" tabindex="-1"></a></span>
<span id="cb253-7"><a href="基本介绍.html#cb253-7" tabindex="-1"></a><span class="fu">multiply_function2</span>(<span class="dv">2</span>,<span class="dv">3</span>)</span></code></pre></div>
<pre><code>## [1] &quot;运算完成！&quot;</code></pre>
<pre><code>## [1] 8</code></pre>
<div class="sourceCode" id="cb256"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb256-1"><a href="基本介绍.html#cb256-1" tabindex="-1"></a><span class="fu">multiply_function2</span>(<span class="dv">2</span>,<span class="dv">3</span>,<span class="st">&quot;哈哈，运算完成~&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;哈哈，运算完成~&quot;</code></pre>
<pre><code>## [1] 8</code></pre>
<p>函数只能返回一个结果，所以，如果有多个结果需要返回时，可以将结果整合为向量、列表或者数据框的形式之后再返回。</p>
<div class="sourceCode" id="cb259"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb259-1"><a href="基本介绍.html#cb259-1" tabindex="-1"></a><span class="co"># 定义一个函数，获取向量内个元素累计叠加的值</span></span>
<span id="cb259-2"><a href="基本介绍.html#cb259-2" tabindex="-1"></a>accumulation <span class="ot">&lt;-</span> <span class="cf">function</span>(x){</span>
<span id="cb259-3"><a href="基本介绍.html#cb259-3" tabindex="-1"></a>  init_num <span class="ot">&lt;-</span> x[<span class="dv">1</span>] <span class="co"># 获取第1个元素</span></span>
<span id="cb259-4"><a href="基本介绍.html#cb259-4" tabindex="-1"></a>  result <span class="ot">&lt;-</span> <span class="fu">c</span>(init_num) <span class="co"># 建立result向量收集结果</span></span>
<span id="cb259-5"><a href="基本介绍.html#cb259-5" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">length</span>(x)<span class="sc">&gt;=</span><span class="dv">2</span>){</span>
<span id="cb259-6"><a href="基本介绍.html#cb259-6" tabindex="-1"></a>    <span class="cf">for</span>(i <span class="cf">in</span> <span class="fu">seq</span>(<span class="dv">2</span>,<span class="fu">length</span>(x))) {</span>
<span id="cb259-7"><a href="基本介绍.html#cb259-7" tabindex="-1"></a>      init_num <span class="ot">&lt;-</span> init_num <span class="sc">+</span> x[i]</span>
<span id="cb259-8"><a href="基本介绍.html#cb259-8" tabindex="-1"></a>      result <span class="ot">&lt;-</span> <span class="fu">append</span>(result, init_num)</span>
<span id="cb259-9"><a href="基本介绍.html#cb259-9" tabindex="-1"></a>    }</span>
<span id="cb259-10"><a href="基本介绍.html#cb259-10" tabindex="-1"></a>  }</span>
<span id="cb259-11"><a href="基本介绍.html#cb259-11" tabindex="-1"></a>  <span class="fu">return</span>(result) <span class="co"># 返回向量</span></span>
<span id="cb259-12"><a href="基本介绍.html#cb259-12" tabindex="-1"></a>}</span>
<span id="cb259-13"><a href="基本介绍.html#cb259-13" tabindex="-1"></a></span>
<span id="cb259-14"><a href="基本介绍.html#cb259-14" tabindex="-1"></a><span class="fu">accumulation</span>(<span class="fu">c</span>(<span class="dv">1</span>))</span></code></pre></div>
<pre><code>## [1] 1</code></pre>
<div class="sourceCode" id="cb261"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb261-1"><a href="基本介绍.html#cb261-1" tabindex="-1"></a><span class="fu">accumulation</span>(<span class="fu">seq</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>))</span></code></pre></div>
<pre><code>## [1]  1  3  6 10</code></pre>
<div class="sourceCode" id="cb263"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb263-1"><a href="基本介绍.html#cb263-1" tabindex="-1"></a><span class="co"># 方法2：使用while循环</span></span>
<span id="cb263-2"><a href="基本介绍.html#cb263-2" tabindex="-1"></a>accumulation2 <span class="ot">&lt;-</span> <span class="cf">function</span>(x){</span>
<span id="cb263-3"><a href="基本介绍.html#cb263-3" tabindex="-1"></a>  init_num <span class="ot">&lt;-</span> x[<span class="dv">1</span>]</span>
<span id="cb263-4"><a href="基本介绍.html#cb263-4" tabindex="-1"></a>  vec_length <span class="ot">&lt;-</span> <span class="fu">length</span>(x) </span>
<span id="cb263-5"><a href="基本介绍.html#cb263-5" tabindex="-1"></a>  result <span class="ot">&lt;-</span> <span class="fu">c</span>(init_num)</span>
<span id="cb263-6"><a href="基本介绍.html#cb263-6" tabindex="-1"></a>  <span class="cf">while</span>(vec_length<span class="sc">&gt;</span><span class="dv">1</span>){</span>
<span id="cb263-7"><a href="基本介绍.html#cb263-7" tabindex="-1"></a>    vec_length <span class="ot">&lt;-</span> vec_length <span class="sc">-</span> <span class="dv">1</span></span>
<span id="cb263-8"><a href="基本介绍.html#cb263-8" tabindex="-1"></a>    init_num <span class="ot">&lt;-</span> init_num <span class="sc">+</span> x[<span class="fu">length</span>(x)<span class="sc">-</span>vec_length<span class="sc">+</span><span class="dv">1</span>]</span>
<span id="cb263-9"><a href="基本介绍.html#cb263-9" tabindex="-1"></a>    result <span class="ot">&lt;-</span> <span class="fu">append</span>(result, init_num)</span>
<span id="cb263-10"><a href="基本介绍.html#cb263-10" tabindex="-1"></a>  }</span>
<span id="cb263-11"><a href="基本介绍.html#cb263-11" tabindex="-1"></a>  <span class="fu">return</span>(result)</span>
<span id="cb263-12"><a href="基本介绍.html#cb263-12" tabindex="-1"></a>}</span>
<span id="cb263-13"><a href="基本介绍.html#cb263-13" tabindex="-1"></a></span>
<span id="cb263-14"><a href="基本介绍.html#cb263-14" tabindex="-1"></a><span class="fu">accumulation2</span>(<span class="fu">c</span>(<span class="dv">1</span>))</span></code></pre></div>
<pre><code>## [1] 1</code></pre>
<div class="sourceCode" id="cb265"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb265-1"><a href="基本介绍.html#cb265-1" tabindex="-1"></a><span class="fu">accumulation2</span>(<span class="fu">seq</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>))</span></code></pre></div>
<pre><code>## [1]  1  3  6 10</code></pre>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="index.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="数据导入导出与预处理.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/LXHe/a-quick-start-on-data-analysis-in-r/blob/main/01-intro.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["a-quick-start-on-data-analysis-in-r.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
